# DOCKER VOLUMES

## OVERALL

[Docs](https://docs.docker.com/storage/volumes/)

Volumes are the preferred mechanism for persisting data generated by and used by Docker containers. While bind mounts are dependent on the directory structure of the host machine, volumes are completely managed by Docker. Volumes have several advantages over bind mounts:

  - Volumes are easier to back up or migrate than bind mounts.
  - You can manage volumes using Docker CLI commands or the Docker API.
  - Volumes work on both Linux and Windows containers.
  - Volumes can be more safely shared among multiple containers.
  - Volume drivers let you store volumes on remote hosts or cloud providers, to encrypt the contents of volumes, or to add other functionality.
  - New volumes can have their content pre-populated by a container.

In addition, volumes are often a better choice than persisting data in a container’s writable layer, because a volume does not increase the size of the containers using it, and the volume’s contents exist outside the lifecycle of a given container.



## VOLUME

### LIST

**List existing volumes**
```
docker volume ls
```

### CREATE

**From the scratch**

Create a `vol_1` volume.

  - volume: `vol_1` volume is created.
  - host level: `/var/lib/docker/volumes/vol_1/_data` is created.
  - container level: no actions as no container specified.
```
docker volume create --name vol_1
```


**During run: `-v` flag**

Create volume with following:

  - volume name: random, uniqly generated by Docker
  - container level: `/volume_app` is created
  - host level: `/var/lib/docker/volumes/<volume_name>/_data`
```
docker run -it -v /volume_app alpine /bin/sh
```


### USE EXISTING ONES


 **`-mount` flag** 
 
 (from version > 1.17)
 
  - volume name: `vol_1` (was created before the run)
  - container level: `/host_vol_dir` is created
  - host level: `/var/lib/docker/volumes/vol_1/_data` (was created before the run)
  
```
docker run -it --mount source=vol_1,target=/host_vol_dir alpine /bin/sh
```


 **`-v` flag**
 
  - volume name: `vol_1` (was created before the run)
  - container level: `/host_volume_dir` is created
  - host level: `/var/lib/docker/volumes/vol_1/_data` (was created before the run)
  
```
docker run -it -v vol_1:/host_volume_dir alpine /bin/sh
```










































