(self._cf=self._cf||[]).push([[41347],{841347:(e,t,r)=>{"use strict";r.d(t,{Xb:()=>i,wY:()=>c});var n=r(151119),s=r(992873),o=r(389027);const a=new class{constructor(e,t){this.gracefulHandlingPeriodMs=e,this.errorHandler=t,(0,n.Z)(this,"errorsToHandle",new Map),(0,n.Z)(this,"processError",(e=>{e&&this.scheduleErrorReporting(e)})),(0,n.Z)(this,"markErrorAsHandled",(e=>{if(!e)return;(0,s.MS)(e)&&((e.graphQLErrors||[]).forEach((e=>this.markErrorAsHandled(e))),this.markErrorAsHandled(e.networkError));const t=this.errorsToHandle.get(e);window.clearTimeout(t),this.errorsToHandle.delete(e)}))}scheduleErrorReporting(e){const t=window.setTimeout((()=>{this.errorHandler(e),i(e)}),this.gracefulHandlingPeriodMs);this.errorsToHandle.set(e,t)}}(100,(function(e){(0,o.U)().submitError(e,{attribution:"graphql"})})),i=a.markErrorAsHandled,c=a.processError},171529:(e,t,r)=>{"use strict";r.d(t,{aU:()=>c,gj:()=>l,Qp:()=>u,NP:()=>f,z8:()=>m});var n=r(159394),s=r(803894),o=r(332653),a=r(71400);const i=Symbol("React error context");function c(e,t){"object"==typeof e&&null!==e&&(e[i]=t)}function l(e){if("object"==typeof e&&null!==e)return e[i]}const h=Symbol("Graphql error context");function u(e,t){"object"==typeof e&&null!==e&&(e[h]=t)}function d(e){if("object"==typeof e&&null!==e)return e[h]?e[h]:function(e){if(!function(e){return"object"==typeof e&&null!==e&&("graphQLErrors"in e||"networkError"in e)}(e))return;const t=e.graphQLErrors;if(t&&t.length>0&&t[0][h])return t[0][h];if(e.networkError)return e.networkError[h];return}(e)}const p=Symbol("SLA error context");function f(e,t){"object"==typeof e&&null!==e&&(e[p]=t)}function m(e){return e&&"object"==typeof e?(0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},l(e)),d(e)),function(e){if("object"==typeof e&&null!==e)return e[p]}(e)),function(e){if(e instanceof a.I)return{statusCode:e.statusCode,restMethod:e.method,restRoute:e.route,traceId:e.traceId}}(e)),function(e){if(e instanceof s.K)return{statusCode:e.response.status,traceId:(0,o.Y)(e.response)}}(e)):{}}},389027:(e,t,r)=>{"use strict";r.d(t,{W:()=>k,U:()=>I});var n=r(159394),s=r(151119),o=r(36200),a=r(275392),i=r(592756),c=r(200396),l=r(454530),h=r(536631),u=r(171529);const d=/(https?):\/\/[a-z0-9]+\.cloudfront\.net\//g,p=/(https?):\/\/[a-z0-9]+\.cloudfront\.net\/download\//g,f=/s\/[^_]+_\/download\//g;function m(e){try{return JSON.parse(e).message||e}catch(t){return e}}const g=function(e,t){let r=!1,s=!1;if(e.exception&&e.exception.values&&(e.exception.values=e.exception.values.map((e=>(e.stacktrace&&e.stacktrace.frames&&(e.stacktrace.frames=e.stacktrace.frames.map((e=>{var t;return e.filename&&(r=Boolean(e.filename.match(f)),s=Boolean(e.filename.match(p)),e.filename=(t=e.filename).match(f)?t.replace(f,"download/").replace(d,"$1://"):t),e}))),e)))),"object"==typeof(null==t?void 0:t.originalException)&&null!==(null==t?void 0:t.originalException)){e.fingerprint=function(e){if(e.message.startsWith("Quota exceeded on key")||e.message.startsWith("QuotaExceededError"))return["storage-quota-error"];if(e.message.startsWith("Maximum call stack size exceeded"))return["maximum-call-stack"];if(e.message.startsWith("Invalid position"))return["invalid-position"];const t=(0,u.z8)(e);return t.failedSlaExperience?t.operationName||t.statusCode?[`experience-${t.failedSlaExperience}`,m(e.message).substr(0,100)]:["{{ default }}",`experience-${t.failedSlaExperience}`]:void 0}(t.originalException);const r=(0,u.z8)(t.originalException),{componentStack:s,failedSlaExperience:o}=r,a=(0,l.Z)(r,["componentStack","failedSlaExperience"]);e.extra=(0,n.Z)((0,n.Z)({},e.extra),a)}return e.logger=r?"wrm":s?"react":"javascript",e.request&&delete e.request.url,delete e.breadcrumbs,e.transaction="",e};function b(e){const t={};return(0,n.Z)({release:(0,i.J)().FRONTEND_VERSION,dsn:e,environment:"CONFLUENCE",beforeSend:(e,t)=>g(e,t),ignoreErrors:["Transport destroyed","Worker was destroyed","Failed to connect on any of the ADC ports","Cannot read property 'postMessage' of undefined","Cannot read property 'postMessage' of null","d.hide is not a function",/^network error/i,/^network failure/i,"TypeError: Failed to fetch","ResizeObserver loop limit exceeded",/ResizeObserver loop completed with undelivered notifications/,/Loading chunk (.+?) failed/]},t)}const E=(0,h.default)((async()=>{return(0,c.LW)(Promise.all([r.e(68050),r.e(22226)]).then(r.bind(r,860287)).then((({BrowserClient:e,Hub:t})=>new t(new e(b("https://2d329ea4a8a04cf0b19117b4675b336f@api.atlassian.com/sentry/1179"))))).catch((()=>null)))}));class w{constructor(e,t){this.flushIntervalMs=e,this.batchMaxSize=t,(0,s.Z)(this,"flushIntervalId",void 0),(0,s.Z)(this,"onFlushCallbacks",new Set),(0,s.Z)(this,"currentBatch",[]),(0,s.Z)(this,"flush",(()=>{const e=this.renewBatch();this.unscheduleFlush(),0!==e.length&&this.onFlushCallbacks.forEach((t=>{try{t(e)}catch(r){setTimeout((()=>{throw console.error('"onFlush" callback threw the below error. Please make sure your callbacks have proper error handling'),r}),0)}}))}))}add(e){this.scheduleFlush(),this.currentBatch.push(e),this.currentBatch.length>=this.batchMaxSize&&this.flush()}onFlush(e){if(!(e instanceof Function))throw new Error(`"onFlush" callback is supposed to be a function; saw ${typeof e} instead`);return this.onFlushCallbacks.add(e),{unsubscribe:()=>{this.onFlushCallbacks.delete(e)}}}forceFlush(){this.flush()}renewBatch(){const e=this.currentBatch;return this.currentBatch=[],e}scheduleFlush(){this.flushIntervalId||(this.flushIntervalId=window.setInterval(this.flush,this.flushIntervalMs))}unscheduleFlush(){this.flushIntervalId&&(window.clearInterval(this.flushIntervalId),this.flushIntervalId=void 0)}}const x=(0,o.j)("CustomMonitoringClient");class S{constructor(){(0,s.Z)(this,"batcher",void 0),(0,s.Z)(this,"isWindowUnloading",!1),(0,s.Z)(this,"context",{}),(0,s.Z)(this,"firstErrorInSession",!0),(0,s.Z)(this,"newSentryEnabled",!1);this.batcher=new w(1e4,50),this.batcher.onFlush((e=>{this.onBatch(e)}));window.addEventListener("pagehide",(()=>{this.isWindowUnloading=!0,this.batcher.forceFlush()}))}enableNewSentry(){this.newSentryEnabled=!0}submitError(e,t){const r=(0,u.z8)(e),{attribution:s}=t;this.incrementCounter("jsErrors",[`attribution:${s}`,`firstInSession:${this.firstErrorInSession}`,...r.operationName?[`queryName:${r.operationName}`]:[]]),this.firstErrorInSession=!1;const o=e&&e.stack&&e.message?e:new Error(e&&e.message||String(e)),a={attribution:s};this.context.slaExperience&&(a.slaExperience=this.context.slaExperience),this.context.pageName&&(a.pageName=this.context.pageName),r.failedSlaExperience&&(a.failedSlaExperience=r.failedSlaExperience),r.operationName&&(a.operationName=r.operationName),a.ssrRendered=Boolean(window.__SSR_RENDERED__).toString(),r.failedSlaExperience?this.logSlaErrorToSentry(o,a).catch((e=>{this.logError(e,{attribution:"backbone"})})):this.newSentryEnabled&&this.logErrorToSentry(o,a),this.logError(o,(0,n.Z)((0,n.Z)({},t),r))}submitPerformanceMetric(e,t,r=[]){this.batcher.add(this.createMetric({type:"timing",value:Math.floor(t),name:`${e}.performance`,tags:r}))}updateContext(e){void 0===e.transitionId||0!==e.transitionId&&this.context.transitionId===e.transitionId||(this.incrementCounter("session",["type:"+(0===e.transitionId?"initial":"transition")]),this.firstErrorInSession=!0),e.pageName&&this.context.pageName!==e.pageName&&void 0!==this.context.pageName&&this.batcher.forceFlush(),Object.assign(this.context,e)}incrementCounter(e,t){this.batcher.add(this.createMetric({type:"increment",name:e,value:1,tags:t}))}logErrorToSentry(e,t){Promise.all([r.e(68050),r.e(22226)]).then(r.bind(r,860287)).then((({withScope:r,captureException:n})=>{r((r=>{r.setTags(t),n(e)}))})).catch((e=>{this.logError(e,{attribution:"backbone"})}))}async logSlaErrorToSentry(e,t){let r=null;const n=E();r=(0,c.wp)(n)?(0,c.NA)(n):await n,r&&r.withScope((n=>{n.setTags(t),r.captureException(e)}))}logError(e,t){(0,a.getAnalyticsWebClient)().then((r=>{r.sendOperationalEvent({source:"ui",action:"unhandledError",actionSubject:"ui",attributes:(0,n.Z)({error:e.message||String(e),stack:e.stack,browserInfo:window.navigator.userAgent,ssrRendered:Boolean(window.__SSR_RENDERED__),releaseId:this.context.releaseId,pageName:this.context.pageName},t)})}))}formatContextAsTags(){const e=[];this.context.pageName&&e.push(`page:${this.context.pageName}`),this.context.environment&&e.push(`environment:${this.context.environment}`),this.context.tenantId&&e.push(`cloudId:${this.context.tenantId}`),this.context.shard&&e.push(`shard:${this.context.shard}`),this.context.product&&e.push(`product:${this.context.product}`);const t=(0,i.J)().PUBLIC_PATH;if(t)try{const r=new URL(t);e.push(`frontendHostname:${r.hostname}`)}catch(r){e.push("frontendHostname:unknown")}return e}onBatch(e){const t={type:"metric",meta:{globalTags:this.formatContextAsTags()},data:e};this.send(t)}send(e){try{x.info`Sending monitoring events: ${e}`;const t="/gateway/api/telemetry",r=JSON.stringify(e);let n=!1;if(navigator.sendBeacon&&(n=navigator.sendBeacon(t,r)),!n){const e=new XMLHttpRequest,n=this.isWindowUnloading;e.open("POST",t,!n),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(r)}}catch(t){x.error`Sending monitoring data failed: ${t}`}}createMetric({type:e,name:t,value:r,tags:n=[]}){return{type:e,name:t,value:r,sampleRate:1,tags:n,timestamp:(new Date).toISOString()}}}class v{submitError(){}submitPerformanceMetric(){}updateContext(){}incrementCounter(){}}let y;const I=()=>(y||(y=/bot/i.test(window.navigator.userAgent)?new v:new S),y),k=()=>{Promise.all([r.e(68050),r.e(22226)]).then(r.bind(r,860287)).then((({init:e})=>{e(b("https://1f56d81aaaae4b1ea5ca08bca6633223@api.atlassian.com/sentry/10"))})).catch((()=>{})),y instanceof S&&y.enableNewSentry()}},71400:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});var n=r(151119);class s extends Error{constructor({message:e,method:t,url:r,"status-code":s},{route:o,traceId:a}={}){super(e.length?e:`Failed to ${t} ${o||r}`),(0,n.Z)(this,"url",void 0),(0,n.Z)(this,"method",void 0),(0,n.Z)(this,"statusCode",void 0),(0,n.Z)(this,"route",void 0),(0,n.Z)(this,"traceId",void 0),this.url=r,this.route=o,this.method=t,this.statusCode=s,this.traceId=a}}}}]);
//# sourceMappingURL=41347.Vvmb8hmaoc.js.map