(self._cf=self._cf||[]).push([[33609],{383664:t=>{"use strict";t.exports=JSON.parse('{"u2":"@atlaskit/flag","i8":"14.2.1"}')},333609:(t,e,n)=>{"use strict";n.r(e),n.d(e,{NotificationsComponent:()=>W});var i=n(159394),a=n(202784),o=n(830691),r=n(412470),s=n(644484),l=n(358056),c=n(151119),d=n(87074);const u="navigation";class p extends a.Component{constructor(...t){super(...t),(0,c.Z)(this,"visibilityChangesSinceTimer",0),(0,c.Z)(this,"state",{count:null}),(0,c.Z)(this,"onVisibilityChange",(()=>{this.props.refreshOnVisibilityChange&&this.shouldRefresh()&&(this.visibilityChangesSinceTimer++,this.refresh("visibility"))})),(0,c.Z)(this,"shouldRefresh",(()=>!document.hidden||this.props.refreshOnHidden)),(0,c.Z)(this,"timerTick",(()=>{this.visibilityChangesSinceTimer=0,this.refresh("timer")})),(0,c.Z)(this,"handleAnalytics",(t=>{const{newCount:e,oldCount:n,source:i}=t;if(this.props.createAnalyticsEvent&&e>0&&0===n){this.props.createAnalyticsEvent({actionSubject:"notificationIndicator",action:"activated",attributes:{badgeCount:e,refreshSource:i}}).fire(u)}if(this.props.createAnalyticsEvent&&e!==n){this.props.createAnalyticsEvent({actionSubject:"notificationIndicator",action:"updated",attributes:{oldCount:n,newCount:e,refreshSource:i}}).fire(u)}})),(0,c.Z)(this,"refresh",(async t=>{if(!this.notificationLogProvider)return;if(!this.shouldRefresh())return;const e={source:t,visibilityChangesSinceTimer:this.visibilityChangesSinceTimer},n=this.props.onCountUpdating&&this.props.onCountUpdating(e)||{};if(!n.skip)try{const e=n.countOverride||(await this.notificationLogProvider.countUnseenNotifications({queryParams:{currentCount:this.state.count||0}})).count;if(null===this.state.count||this.state.count!==e){const n={oldCount:this.state.count||0,newCount:e,source:t};this.handleAnalytics(n),this.props.onCountUpdated&&this.props.onCountUpdated(n),this.setState({count:e})}}catch(i){}}))}async componentDidMount(){this.notificationLogProvider=await this.props.notificationLogProvider,this.refresh("mount"),this.updateInterval(),document.addEventListener("visibilitychange",this.onVisibilityChange)}componentDidUpdate(t){t.refreshRate!==this.props.refreshRate&&this.updateInterval()}componentWillUnmount(){this.intervalId&&clearInterval(this.intervalId),document.removeEventListener("visibilitychange",this.onVisibilityChange)}updateInterval(){const{refreshRate:t}=this.props;this.intervalId&&clearInterval(this.intervalId),t&&t>0&&(this.intervalId=window.setInterval(this.timerTick,t))}render(){const{count:t}=this.state,{appearance:e,max:n}=this.props;return t?a.createElement("div",{"data-test-selector":"NotificationIndicator"},a.createElement(d.Z,{max:n,appearance:e},t)):null}}p.displayName="NotificationIndicator",(0,c.Z)(p,"defaultProps",{appearance:"important",max:9,refreshRate:0,refreshOnHidden:!1,refreshOnVisibilityChange:!0});const h=p;const f=(0,n(491807).Z)()(h);var g=n(785896);const m="5.0.1",v="atlaskitNotificationLogClient";class x{constructor(t,e,n=v){this.serviceConfig={url:t},this.cloudId=e,this.source=n}async countUnseenNotifications(t={}){const e=(0,i.Z)((0,i.Z)({path:"api/2/notifications/count/unseen"},t),{},{queryParams:(0,i.Z)({cloudId:this.cloudId,source:this.source},t.queryParams||{}),requestInit:(0,i.Z)({mode:"cors",headers:{"x-app-version":`${m}-${v}`}},t.requestInit||{})});return g.utils.requestService(this.serviceConfig,e)}}var y=n(35266),b=n(175612),w=n(404421),k=n(550567),N=n(621598),Z=n(364604),C=n(248839),I=n(367450),E=n(639409),D=n(885255),A=n(557098),T=n(327472),O=n(180213),P=n(454530),S=n(607560),R=n(847134);const _=({loading:t})=>({border:0,flex:"1 0 100%",height:"inherit",display:t?"none":"block",width:"100%"}),M=({_url:t,locale:e,product:n})=>{if(t)return t;const i="/home/notificationsDrawer/iframe.html",a=[];return e&&a.push(`locale=${encodeURIComponent(e)}`),n&&a.push(`product=${encodeURIComponent(n)}`),a.length?`${i}?${a.join("&")}`:i},$=t=>{const{_url:e,locale:n,product:i,testId:o}=t,r=(0,P.Z)(t,["_url","locale","product","testId"]),s=(0,a.useRef)(null),[l,c]=(0,a.useState)(!0),d=t=>{s.current&&t.source&&t.source.window===s.current.contentWindow&&"readyForUser"===t.data&&c(!1)};(0,a.useEffect)((()=>(window.addEventListener("message",d),()=>{window.removeEventListener("message",d)})),[]);return(0,R.tZ)("iframe",(0,S.Z)({},r,{css:_({loading:l}),"data-testid":o,onLoad:(...t)=>{c(!1),r.onLoad&&r.onLoad(...t)},ref:s,src:M({_url:e,locale:n,product:i})}))};var L=n(51681);var F=n(496054),U=n(707213);const B=r.default.div`
  width: 540px;
  padding: 18px 0px 0 18px;
  height: calc(100vh - 100px);
  display: flex;
`,j=(0,a.memo)((({onTransition:t})=>{const{createAnalyticsEvent:e}=(0,L._)(),n=(0,a.useRef)(null);!function(t,{enabled:e=!0,after:n=(()=>{})}){const{push:i}=(0,a.useContext)(E.M);(0,a.useEffect)((()=>{if(!e)return;const a=t.current;if(!a)return;const o=a.querySelector("iframe");o&&o.addEventListener("load",(()=>{let t=o.contentDocument;t&&t.addEventListener("click",(t=>{if(0!==t.button)return;if(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return;const e=t.target&&t.target.closest("a");if(!e)return;const a=e.getAttribute("target"),o=e.getAttribute("href");"_top"===a&&o&&(t.defaultPrevented||(t.preventDefault(),i(o),n()))}))}))}),[t.current])}(n,{enabled:!0,after:()=>{t&&t(),e({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",source:"appNavigation",actionSubjectId:"notification"}}).fire()}});const i=(0,a.useContext)(D.F);(0,a.useEffect)((()=>{i.start({name:A.q.APP_NAV_NOTIFICATIONS_DROPDOWN,timeout:F.O.NAVIGATION_LOAD})}),[i]);const o=(0,a.useCallback)((()=>{i.succeed({name:A.q.APP_NAV_NOTIFICATIONS_DROPDOWN})}),[i]);return a.createElement(B,{innerRef:n},a.createElement($,{locale:(0,U.i0)().locale,product:"confluence",testId:"confluence-notifications",title:"Notifications",onLoad:o}))})),V=y.T;class q extends x{constructor(){super("","")}countUnseenNotifications(){return Promise.resolve({count:0})}}const z=(0,o.vU)({errorTitle:{id:"app-navigation.notifications.error.title",defaultMessage:"Something went wrong",description:"Title displayed in case of error in notifications dropdown"},errorMessage:{id:"app-navigation.notifications.error.message",defaultMessage:"We are unable to show your notifications at this time. Please refresh the page or try again later.",description:"Message displayed in case of error in notifications dropdown"}}),G=r.default.div`
  max-width: 400px;
`,W=(0,a.memo)((()=>{const[t,e]=(0,a.useState)(!1),[n,r]=(0,a.useState)(!1),{match:c}=(0,a.useContext)(E.M),{isLicensed:d,cloudId:u}=(0,I.D)();(0,a.useEffect)((()=>{if(n){const t=setTimeout((()=>{r(!1)}),1e4);return()=>{clearTimeout(t)}}}),[n]);const p=(0,s.r)((()=>{t?g():(r(!0),e(!0))}),{type:"sendUIEvent",data:{source:"globalNavigation",action:"clicked",actionSubject:"navigationItem",actionSubjectId:"notifications",attributes:{selectedItemPageContext:c?c.name:void 0,navigationLayer:"global",navVersion:"3",navdexPointType:C.Om.START_TOUCH}}}),h=(0,a.useContext)(D.F),g=(0,a.useCallback)((()=>{h.abort({name:A.q.APP_NAV_NOTIFICATIONS_DROPDOWN,reason:"dropdown closed by user"}),e(!1)}),[h]),m=(0,a.useMemo)((()=>()=>a.createElement(f,{notificationLogProvider:Promise.resolve(n||t?new q:new x("/gateway/api/notification-log/",u)),refreshRate:6e4})),[u,t,n]),v=(0,a.useMemo)((()=>()=>a.createElement(T.O,{attribution:O.x.DISCO,renderOnError:()=>a.createElement(G,null,a.createElement(k.Z,{icon:a.createElement(w.default,{primaryColor:b.Y300,label:"Warning"}),title:a.createElement(o._H,(0,i.Z)({},z.errorTitle)),description:a.createElement(o._H,(0,i.Z)({},z.errorMessage)),id:"app-navigation.profile.error"}))},a.createElement(j,{onTransition:g}))),[g]);return d?a.createElement("span",{"data-testid":"app-navigation-notifications"},a.createElement(l.Z,{placement:"bottom-end",shouldFlip:!0,rootBoundary:"viewport",content:v,isOpen:t,onClose:g,trigger:e=>a.createElement("span",{"data-testid":"app-navigation-notifications-button"},a.createElement(V,(0,i.Z)({badge:m,onClick:p,isSelected:t,tooltip:a.createElement(N.oW,{shortcut:"g n",contentBefore:a.createElement(o._H,{id:"app-navigation.notifications.link",defaultMessage:"Notifications"})})},e)))}),a.createElement(Z.P,{accelerator:"g n",listener:p})):null}))},513298:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(412470).default.span`
  ${t=>`\n    background-color: ${t.backgroundColor};\n    color: ${t.textColor};\n  `};
  border-radius: 2em;
  display: inline-block;
  font-size: 12px;
  font-weight: normal;
  line-height: 1;
  min-width: 1px;
  padding: 0.16666666666667em 0.5em;
  text-align: center;
`},130422:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(202784);const{Fragment:a}=i,o=t=>{let e="",{children:n=0,max:o=0}=t;return n<0&&(n=0),o<0&&(o=0),e=o&&o<n?`${o}+`:n===1/0?"∞":n,i.createElement(a,null,e)}},87074:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(607560),a=n(202784),o=n(805508),r=n(37211),s=n(513298),l=n(130422);const c=({theme:t,appearance:e="default",children:n=0,max:c=99,testId:d})=>a.createElement(r.Q2.Provider,{value:t},a.createElement(o.Z.Consumer,null,(({mode:t})=>a.createElement(r.Q2.Consumer,{appearance:e,mode:t},(t=>a.createElement(s.Z,(0,i.Z)({},t,{"data-testid":d}),"string"==typeof n?n:a.createElement(l.Z,{max:c},n)))))))},37211:(t,e,n)=>{"use strict";n.d(e,{z7:()=>r,eR:()=>s,Q2:()=>l});var i=n(159394),a=n(175612),o=n(182883);const r={added:{light:a.G50,dark:a.G50},default:{light:a.N40,dark:a.DN70},important:{light:a.R400,dark:a.R400},primary:{light:a.B400,dark:a.B100},primaryInverted:{light:a.N0,dark:a.DN400},removed:{light:a.R50,dark:a.R50}},s={added:{light:a.G500,dark:a.G500},default:{light:a.N800,dark:a.DN900},important:{light:a.N0,dark:a.N0},primary:{light:a.N0,dark:a.DN0},primaryInverted:{light:a.B500,dark:a.DN0},removed:{light:a.R500,dark:a.R500}},l=(0,o.j)((({appearance:t,mode:e})=>"object"==typeof t?(0,i.Z)({backgroundColor:r.default.light,textColor:s.default.light},t):{backgroundColor:r[t][e],textColor:s[t][e]}))},185696:(t,e,n)=>{"use strict";n.d(e,{Mx:()=>v,ZP:()=>b});var i=n(607560),a=n(202784),o=n(847134),r=n(780990),s=n(30283),l=n(419035),c=n(590095),d=n(442298);const u=(0,d.ww)(),p=50*u,h=6*u,f=10*u;function g(){}const m=(0,a.createContext)({onDismissed:()=>{},dismissAllowed:()=>!1});function v(){return(0,a.useContext)(m)}const x=`\n  bottom: 0;\n  position: absolute;\n  width: ${p}px;\n  transition: transform 400ms ease-in-out;\n\n  @media (max-width: 560px) {\n    width: 100vw;\n  }\n\n  &:first-of-type {\n    transition: none;\n    transform: translate(0,0);\n  }\n\n  &:nth-of-type(n + 2) {\n    animation-duration: 0ms;\n    transform: translateX(0) translateY(100%) translateY(${2*u}px);\n  }\n\n  /* Layer the 'primary' flag above the 'secondary' flag */\n  &:nth-of-type(1) {\n    z-index: 5;\n  }\n  &:nth-of-type(2) {\n    z-index: 4;\n  }\n\n  &:nth-of-type(n + 4) {\n    visibility: hidden;\n  }\n`;var y={name:"p64dor",styles:"border:0;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;"};const b=t=>{const{id:e,label:n="Flag notifications",labelTag:u="h2",children:p,onDismissed:v=g}=t,b=Array.isArray(p)?p.length>0:Boolean(p);let w=null;b&&p&&(w=Array.isArray(p)?p[0].props.id:p.props.id);const k={onDismissed:v,dismissAllowed:t=>t===w};return(0,o.tZ)(m.Provider,{value:k},(0,o.tZ)(c.Z,{zIndex:d.ug.flag()},(0,o.tZ)("div",{id:e,css:(0,o.iv)("bottom:",h,"px;left:",f,"px;position:fixed;z-index:",d.ug.flag(),";@media (max-width:560px){bottom:0;left:0;}")},b?(0,o.tZ)(u,{css:y},n):null,(0,o.tZ)(l.Z,{appear:!1},!!p&&a.Children.map(p,((t,e)=>{const n=0===e,{id:a}=t.props;return(0,o.tZ)(r.Z,{key:a,enterFrom:"left",fade:"inout",duration:400,animationTimingFunction:()=>s.YQ},(e=>(0,o.tZ)("div",(0,i.Z)({},e,{css:(0,o.iv)(x," ",n?"\n                    && + * {\n                     transform: translate(0, 0);\n                     transition-duration: 200ms\n                   }":"")}),t)))}))))))}},550567:(t,e,n)=>{"use strict";n.d(e,{Z:()=>q});var i=n(159394),a=n(607560),o=n(202784),r=n(847134),s=n(10314),l=n(773046),c=n(127537),d=n(805508),u=n(442298),p=n(790040);const h="normal";var f=n(175612);const g={error:{light:f.R400,dark:f.R300},info:{light:f.N500,dark:f.N500},normal:{light:f.N0,dark:f.DN50},success:{light:f.G400,dark:f.G300},warning:{light:f.Y200,dark:f.Y300}},m=(t,e)=>g[t][e],v=f.N60A,x={error:{light:f.N0,dark:f.DN40},info:{light:f.N0,dark:f.DN600},normal:{light:f.N500,dark:f.DN600},success:{light:f.N0,dark:f.DN40},warning:{light:f.N700,dark:f.DN40}},y=(t,e)=>x[t][e],b=f.N50A,w={error:{light:f.N40,dark:f.N40},info:{light:f.N40,dark:f.N40},normal:{light:f.B100,dark:f.B100},success:{light:f.N40,dark:f.N40},warning:{light:f.N200,dark:f.N200}},k=(t,e)=>w[t][e],N="rgba(255, 255, 255, 0.08)",Z={success:{light:N,dark:f.N30A},info:{light:N,dark:N},error:{light:N,dark:f.N30A},warning:{light:f.N30A,dark:f.N30A},normal:{light:"none",dark:"none"}},C={success:{light:f.N0,dark:f.DN40},info:{light:f.N0,dark:f.DN600},error:{light:f.N0,dark:f.DN600},warning:{light:f.N700,dark:f.DN40},normal:{light:f.B400,dark:f.B100}},I=(t,e)=>Z[t][e],E=(t,e)=>C[t][e];var D=n(383664),A=n(419035),T=n(104502);const O=5*(0,u.ww)(),P=({children:t,isExpanded:e,testId:n})=>(0,r.tZ)("div",{"aria-hidden":!e,css:(0,r.iv)("max-height:",e?150:0,"px;transition:max-height 0.3s;display:flex;flex:1 1 100%;flex-direction:column;justify-content:center;min-width:0;padding:0 0 0 ",O,"px;"),"data-testid":n&&`${n}-expander`},(0,r.tZ)(A.Z,{appear:!0},e&&(0,r.tZ)(T.ZP,null,(e=>(0,r.tZ)("div",e,t)))));var S=n(227371);const R=(0,u.ww)(),_=2*R,M=R/4,$=t=>{const{appearance:e=h,actions:n=[],linkComponent:i,mode:a,testId:o}=t;if(!n.length)return null;const s=e!==h;return(0,r.tZ)("div",{css:(0,r.iv)("display:flex;flex-wrap:wrap;padding-top:",R,"px;transform:",e===h?`translateX(-${M}px)`:0,";align-items:center;"),"data-testid":o&&`${o}-actions`},n.map(((t,n)=>[n&&!s?(0,r.tZ)("div",{css:(0,r.iv)("text-align:center;display:inline-block;width:",_,"px;"),key:n+.5},"·"):"",(0,r.tZ)(S.Z,{onClick:t.onClick,href:t.href,target:t.target,appearance:s?"default":"link",component:i,spacing:"compact",testId:t.testId,key:n,css:(0,r.iv)("&&,a&&{margin-left:",n&&s?R:0,"px;font-weight:500;padding:0 ","normal"===e?0:R,"px !important;background:",I(e,a),";color:",E(e,a)," !important;}&&:focus,a&&:focus{box-shadow:0 0 0 2px ",k(e,a),";}&&:hover,&&:active,a&&:hover,a&&:active{text-decoration:underline;}")},t.content)])))};var L=n(185696);function F(){}const U={componentName:"flag",packageName:D.u2,packageVersion:D.i8},B=(0,u.ww)(),j=2*B,V=4*B,q=t=>{const{actions:e=[],appearance:n=h,icon:f,title:g,description:x,linkComponent:w,onMouseOver:N,onFocus:Z=F,onMouseOut:C,onBlur:I=F,onDismissed:E=F,testId:D,id:A,analyticsContext:T}=t,{onDismissed:O,dismissAllowed:S}=(0,L.Mx)(),R=S(A),_=(0,o.useCallback)(((t,e)=>{E(t,e),O(t,e)}),[E,O]),[M,q]=(0,o.useState)(!1),z=(0,p.B)((0,i.Z)({fn:_,action:"dismissed",analyticsData:T},U)),G=n!==h,W=(0,o.useCallback)((({mode:t})=>{if(!G&&!R)return null;if(G&&!x&&!e.length)return null;let i=c.default,a="Dismiss flag",o=()=>{R&&z(A)},d="small",p=D&&`${D}-dismiss`;return G&&(i=M?l.default:s.default,a="Toggle flag body",o=()=>q(!M),d="large",p=D&&`${D}-toggle`),(0,r.tZ)("button",{css:(0,r.iv)("appearance:none;background:none;border:none;border-radius:",(0,u.E0)(),"px;color:",y(n,t),";cursor:pointer;flex:0 0 auto;line-height:1;margin-left:",B,"px;padding:0;white-space:nowrap;&:focus{outline:none;box-shadow:0 0 0 2px ",k(n,t),";}"),"aria-expanded":M,onClick:o,"data-testid":p,type:"button"},(0,r.tZ)(i,{label:a,size:d}))}),[e.length,n,x,A,G,R,M,z,D]),H=(0,o.useCallback)((t=>{t.preventDefault()}),[]);(0,o.useEffect)((()=>{G&&M&&!x&&!e.length&&q(!1)}),[e.length,x,G,M]);const Y={onMouseOver:N,onFocus:(0,p.B)((0,i.Z)({fn:Z,action:"focused",analyticsData:T},U)),onMouseOut:C,onBlur:(0,p.B)((0,i.Z)({fn:I,action:"blurred",analyticsData:T},U))},Q=W;let K=`0 20px 32px -8px ${b}`;return G||(K=`0 0 1px ${v}, ${K}`),(0,r.tZ)(d.Z.Consumer,null,(t=>{const i=t.mode,o=y(n,i);return(0,r.tZ)("div",(0,a.Z)({css:(0,r.iv)("background-color:",m(n,i),";border-radius:",(0,u.E0)(),"px;box-sizing:border-box;box-shadow:",K,";color:",o,";padding:",j,"px;transition:background-color 200ms;width:100%;z-index:",u.ug.flag(),";&:focus{outline:none;box-shadow:0 0 0 2px ",k(n,i),";}"),role:"alert",tabIndex:0,onMouseDown:H,"data-testid":D},Y),(0,r.tZ)("div",{css:(0,r.iv)("display:flex;align-items:center;height:",V,"px;")},f,(0,r.tZ)("span",{css:(0,r.iv)("color:",o,";font-weight:600;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 0 0 ",j,"px;")},g),(0,r.tZ)(Q,{mode:i})),(0,r.tZ)(P,{isExpanded:!G||M,testId:D},x&&(0,r.tZ)("div",{css:(0,r.iv)("color:",o,";word-wrap:break-word;overflow:auto;max-height:100px;"),"data-testid":D&&`${D}-description`},x),(0,r.tZ)($,{actions:e,appearance:n,linkComponent:w,testId:D,mode:i})))}))}},773046:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(202784)),a=o(n(382600));function o(t){return t&&t.__esModule?t:{default:t}}const r=t=>i.default.createElement(a.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M11.221 9.322l-2.929 2.955a1.009 1.009 0 000 1.419.986.986 0 001.405 0l2.298-2.317 2.307 2.327a.989.989 0 001.407 0 1.01 1.01 0 000-1.419l-2.94-2.965A1.106 1.106 0 0011.991 9c-.279 0-.557.107-.77.322z" fill="currentColor" fill-rule="evenodd"/></svg>'},t));r.displayName="ChevronUpIcon";var s=r;e.default=s},780990:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(454530),a=n(607560),o=n(202784),r=n(30283),s=n(865297),l=n(851083);const c=(t,e,n)=>({["entering"===e?"0%":"100%"]:{transform:{top:"translate3d(0, -100%, 0)",right:"translate3d(100%, 0, 0)",bottom:"translate3d(0, 100%, 0)",left:"translate3d(-100%, 0, 0)"}[t],opacity:"inout"===n||"in"===n&&"entering"===e||"out"===n&&"exiting"===e?0:1},["entering"===e?"100%":"0%"]:{transform:"none",opacity:1}}),d=t=>{let{children:e,enterFrom:n,exitTo:d,fade:u="none",duration:p=s.MH,animationTimingFunction:h=(t=>"entering"===t?r.Vv:r.YQ)}=t,f=(0,i.Z)(t,["children","enterFrom","exitTo","fade","duration","animationTimingFunction"]);return o.createElement(l.Z,(0,a.Z)({duration:p,enteringAnimation:c(n,"entering",u),exitingAnimation:c(d||n,"exiting",u),animationTimingFunction:h},f),e)}}}]);
//# sourceMappingURL=33609.7Bon7bUj9E.js.map