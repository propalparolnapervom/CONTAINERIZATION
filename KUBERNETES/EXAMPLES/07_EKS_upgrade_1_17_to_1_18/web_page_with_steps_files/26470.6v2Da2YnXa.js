(self._cf=self._cf||[]).push([[26470],{996541:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{uP:()=>SSRMouseEventWrapper});var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(547313),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(202784);window.__ADD_SSR_METRIC__=e=>{window.__SSR_INTERACTIONS__=window.__SSR_INTERACTIONS__||{},window.__SSR_INTERACTIONS__[e]=!0,window.__SSR_INTERACTIONS_DURATIONS__=window.__SSR_INTERACTIONS_DURATIONS__||{},window.__SSR_INTERACTIONS_DURATIONS__[e]=window.__SSR_INTERACTIONS_DURATIONS__[e]||[],window.__SSR_INTERACTIONS_DURATIONS__[e]=[...window.__SSR_INTERACTIONS_DURATIONS__[e],performance.now()]};const mouseEventScript=function(){var e,t;const n=null===(e=document)||void 0===e||null===(t=e.currentScript)||void 0===t?void 0:t.parentNode;if(!n)return;const r=n.dataset.ssrMetricName;let i=!1;n.addEventListener("click",(()=>{window.__ADD_SSR_METRIC__(`${r}_CLICK`)}),!0),n.addEventListener("mouseenter",(()=>{i=!0,setTimeout((function(){i&&(window.__ADD_SSR_METRIC__(`${r}_HOVER`),i=!1)}),100)})),n.addEventListener("mouseleave",(()=>{i=!1}))},SSRMouseEvent=()=>{const scriptRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const current=null==scriptRef?void 0:scriptRef.current;current&&eval(current.innerHTML)})),react__WEBPACK_IMPORTED_MODULE_1__.createElement("script",{"data-test-id":"ssr-mouse-event-script",ref:scriptRef,dangerouslySetInnerHTML:{__html:`(${mouseEventScript.toString()})()`}})};SSRMouseEvent.displayName="SSRMouseEvent";const DivStyledWrapper=(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__.Z)("div",{target:"e130aeew0"})({name:"1jjjlg6",styles:'display:inline-block;position:relative;&::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;}'}),SSRMouseEventWrapper=({metricName:e,children:t})=>window.__SSR_RENDERED__?window.__SSR_RENDERED__?react__WEBPACK_IMPORTED_MODULE_1__.createElement(DivStyledWrapper,{"data-ssr-metric-name":e,onClick:()=>window.__ADD_SSR_METRIC__(`${e}_CLICK`),onMouseEnter:()=>window.__ADD_SSR_METRIC__(`${e}_HOVER`)},react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,t)):react__WEBPACK_IMPORTED_MODULE_1__.createElement(DivStyledWrapper,{"data-ssr-metric-name":e},t,react__WEBPACK_IMPORTED_MODULE_1__.createElement(SSRMouseEvent,null)):react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,t);SSRMouseEventWrapper.displayName="SSRMouseEventWrapper"},325463:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var r=n(202784),i=n(286235),s=n(655050),a=n(841347),o=n(145795),c=n(272086);function l({children:e}){const{data:t,loading:n,error:l}=(0,i.aM)(o.D);let d;return l&&((0,s.T)(l)?(0,a.Xb)(l):d=l),r.createElement(r.Fragment,null,e({edition:(0,c._)(t),error:d,loading:n}))}l.displayName="EditionQueryComponent"},593700:(e,t,n)=>{"use strict";n.d(t,{n:()=>U});var r=n(159394),i=n(151119),s=n(202784),a=n(830691),o=n(491807),c=n(227371),l=(n(213980),n(540624));const d=e=>{const t=s.Children.toArray(e.children);return s.createElement(l.Z,null,t)};d.displayName="ChangeEditionButtonGroup";var u=n(196510),p=n(508787),g=n(174965),m=n(161049),E=n.n(m),_=n(774600),I=n.n(_),h=n(286235),y=n(51681),A=n(281796),S=n(605162),T=n(542051),R=n(367450),C=n(440805),D=n(145795),v=n(272086),f=n(847241),w=n(905864),M=n(390045);const N=(0,A.r)((({analyticsProps:e,autoFocus:t,onUpFlowOpen:n,targetEdition:i=f.m.STANDARD,flags:o})=>{const[l,d]=(0,s.useState)(!1),{data:p,loading:g,error:m}=(0,h.aM)(D.D),_=(0,v._)(p),{cloudId:A}=(0,R.D)(),{createAnalyticsEvent:N}=(0,y._)();return g?null:s.createElement(s.Fragment,null,m?s.createElement(C.X,{error:m}):null,s.createElement(c.Z,{appearance:"primary",autoFocus:t,onClick:async()=>{const t=await(async()=>{const e=await S.LT.getItem(T.X.GROWTH_EXPERIMENT_REQUEST_UPGRADE_SENT);if("true"===e){const e=I()(i.toString().toLowerCase());o.showWarningFlag({title:s.createElement(a._H,(0,r.Z)({},w.a.requestUpgradeAlreadySentWarningTitle)),description:s.createElement(a._H,(0,r.Z)((0,r.Z)({},w.a.requestUpgradeAlreadySentWarningDescription),{},{values:{edition:e}}))})}else d(!0);return e})(),{actionSubjectId:n,attributes:c,source:l}=e;c&&(c.currentEdition=_,c.targetEdition=i,c.requestUpgradeNotificationSent=t),N({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:n,source:l,attributes:c}}).fire()}},s.createElement(a._H,(0,r.Z)({},w.a.requestUpgradeButton))),l?s.createElement(M.UpFlowComponent,{canChangeEdition:!1,cloudId:A,currentEdition:_,flow:"request-upgrade",product:"confluence",targetEdition:i,touchpointId:e.source,onClose:()=>{E()(n)||d(!1)},onOpen:n,epMessageId:u.er}):null)}));var b=n(558612),O=n(281326),k=n(449559),P=n(876650),L=n(295561),x=n(874070);const F=(0,a.XN)((function({canShowUpgradeButton:e,children:t,intl:n,isSiteAdmin:r,secondaryLink:i}){const{IN_CONTEXT_MODAL:a,END_USER_REQUEST:o}=k.c,{cohort:c}=(0,x.a)(a,P.yu,P.HX.NOT_ENROLLED),{cohort:l,fireExposureEvent:d}=(0,x.a)(o,P.yu,P.HX.NOT_ENROLLED),u=(0,L.R)(n&&n.locale),p=c===P.HX.EXPERIMENT,g=l===P.HX.EXPERIMENT;(0,s.useEffect)((()=>{!r&&p&&u&&d()}),[r,p,u,d]);let m=!1,E=!1,_=!0,I=!0;return e&&(r?m=!0:p&&u&&(E=g),(m||E)&&(_=!i,I=!1)),t({showUpgradeTryNowButton:m,showUpgradeRequestButton:E,showLearnMore:_,learnMoreIsPrimaryCTA:I})}));class Z extends s.Component{constructor(...e){super(...e),(0,i.Z)(this,"generateCTAAnalyticsProps",(e=>{const{grandfathered:t,isSiteAdmin:n,source:r}=this.props;return{actionSubjectId:e,source:r,attributes:{isGrandfathered:Boolean(t),isSiteAdmin:n}}})),(0,i.Z)(this,"triggerLinkClickAnalytics",((e,t)=>{const{createAnalyticsEvent:n}=this.props;if(n){const{actionSubjectId:i,attributes:s,source:a}=this.generateCTAAnalyticsProps(e);n({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:i,source:a,attributes:(0,r.Z)((0,r.Z)({},s),{},{linkMessage:t})}}).fire()}})),(0,i.Z)(this,"handleSecondaryLinkClick",(()=>{const e=this.props.secondaryLink;e&&(this.triggerLinkClickAnalytics(e.actionSubjectId,e.messageDescriptor.defaultMessage),"function"==typeof e.onClick&&e.onClick())}))}componentDidMount(){const{createAnalyticsEvent:e}=this.props;if(e){const{attributes:t,source:n}=this.generateCTAAnalyticsProps("");e({type:"sendScreenEvent",data:{name:"changeEditionGatewayScreen",attributes:(0,r.Z)((0,r.Z)({},t),{},{source:n})}}).fire()}}renderButtons(){const{autoFocus:e,isSiteAdmin:t,canShowUpgradeButton:n,learnMoreLinkActionSubjectId:i,upgradeEditionActionSubjectId:o,upgradeRequestEditionActionSubjectId:l,secondaryLink:d,onUpFlowOpen:u,targetEdition:p}=this.props;return s.createElement(F,{isSiteAdmin:t,canShowUpgradeButton:n,secondaryLink:d},(({showUpgradeTryNowButton:t,showUpgradeRequestButton:n,showLearnMore:m,learnMoreIsPrimaryCTA:E})=>s.createElement(s.Fragment,null,t?s.createElement(g.j,{autoFocus:e,analyticsProps:this.generateCTAAnalyticsProps(o),onUpFlowOpen:u,targetEdition:p}):n&&s.createElement(N,{autoFocus:e,analyticsProps:this.generateCTAAnalyticsProps(l),onUpFlowOpen:u,targetEdition:p}),m&&s.createElement(b.v,{analyticsProps:this.generateCTAAnalyticsProps(i),appearance:E?"primary":"link",onUpFlowOpen:u,targetEdition:p}),d&&s.createElement(c.Z,{appearance:"link",href:d.href?d.href:void 0,id:"secondaryLink",spacing:"default",target:"_blank",onClick:this.handleSecondaryLinkClick},s.createElement(a._H,(0,r.Z)({},d.messageDescriptor))))))}render(){const{appearanceType:e=u.cI.DEFAULT,body:t,targetEdition:n,title:r}=this.props;return s.createElement(O.m,{appearanceType:e,edition:n,title:r,body:t,actions:s.createElement(d,null,this.renderButtons())})}}Z.displayName="ChangeEditionSectionMessageComponent",(0,i.Z)(Z,"defaultProps",{autoFocus:!0,canShowUpgradeButton:!0,learnMoreLinkActionSubjectId:"freeLearnMore",upgradeEditionActionSubjectId:"freeTryNow",upgradeRequestEditionActionSubjectId:"requestTrial"});const U=(0,p.y)((0,o.Z)()(Z))},309636:(e,t,n)=>{"use strict";n.d(t,{l:()=>d});var r=n(202784),i=n(830691),s=n(847241),a=n(905864),o=n(508787),c=n(593700);const l=({isSiteAdmin:e=!1,intl:t,appearanceType:n,parentData:i,isChildPage:o=!1,onUpFlowOpen:l})=>{const{title:d,body:u}=function(e,t,n,r){if(t&&r){const{title:e,links:{webui:t}}=r,i=`<a href="${t}" target="_blank">${e}</a>`;return{title:n.formatMessage(a.a.grandfatheredChildContentRestrictionsTitle),body:`${n.formatMessage(a.a.grandfatheredChildContentRestrictionsBody,{parent:i})}`}}return{title:n.formatMessage(e?a.a.siteAdminContentRestrictionsTitle:a.a.nonSiteAdminContentRestrictionsTitle),body:n.formatMessage(e?a.a.siteAdminPageRestrictionsBody:a.a.nonSiteAdminPageRestrictionsBody)}}(e,o,t,i);return r.createElement(c.n,{appearanceType:n,title:d,body:u,source:"pageRestrictionsInline",canShowUpgradeButton:!o,onUpFlowOpen:l,targetEdition:s.m.STANDARD})};l.displayName="ChangeEditionSectionMessageContentRestrictedComponent";const d=(0,i.XN)((0,o.y)(l))},281326:(e,t,n)=>{"use strict";n.d(t,{m:()=>h});var r=n(202784),i=n(412470),s=n(471950),a=n(327626),o=n(175612),c=n(448506),l=n(29398),d=n(196510),u=n(847241);const p=i.default.div`
  width: ${({width:e})=>e}px;
  flex: 0 0 auto;
`,g=i.default.div`
  display: flex;
  flex-direction: column;
`,m=i.default.div`
  ${(0,l.AC)()};
  margin-top: 0;
`,E=i.default.div`
  margin-top: 8px;
`,_=i.default.div`
  margin-top: 16px;
`,I=i.default.div`
  background-color: ${o.N0};

  border-radius: 3px;
  display: flex;

  margin: 0 auto;

  ${({appearanceType:e})=>{switch(e){case d.cI.DEFAULT:return i.css`
          padding: 16px 25px;
          ${c._K};
          max-width: 710px;
        `;case d.cI.FLAT:return i.css`
          padding: 16px 25px;
          max-width: 710px;
        `;case d.cI.INLINE:return i.css`
          width: 352px;
          font-size: 14px;
        `;case d.cI.INLINE_MODAL:return i.css`
          max-width: 400px;
          ${m} {
            ${(0,l.lL)()};
            margin-top: 0;
          }

          ${E} {
            margin-top: 16px;
          }

          ${_} {
            margin-top: 96px;
            display: flex;
          }
        `}}}
`;function h({actions:e,appearanceType:t=d.cI.DEFAULT,body:n,edition:i,title:c}){return r.createElement(a.Z,{mode:"light"},r.createElement(I,{appearanceType:t},i===u.m.PREMIUM&&r.createElement(p,{width:"40"},r.createElement(s.default,{label:"",primaryColor:o.B400})),r.createElement(g,null,r.createElement(m,null,c),"string"==typeof n?r.createElement(E,{dangerouslySetInnerHTML:{__html:n}}):r.createElement(E,null,n),e&&r.createElement(_,{className:"actionButtons"},e))))}h.displayName="EditionSectionMessage"},874599:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});const r=n(202784).createContext(undefined);r.displayName="ExperienceContext"},239381:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var r=n(202784),i=n(772005);class s extends r.Component{constructor(e){super(e),this.markExperienceStart()}markExperienceStart(){const{id:e,name:t,timeout:n,attributes:r,collect:s,onSuccess:a}=this.props;(0,i.OV)().start({attributes:r,name:t,timeout:n,id:e,collect:s,onSuccess:a})}render(){return null}}s.displayName="ExperienceStart"},235748:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var r=n(202784),i=n(885255);function s({name:e,attributes:t}){const n=(0,r.useContext)(i.F);return(0,r.useEffect)((()=>n.succeed({name:e,attributes:t})),[e,t,n]),null}},617075:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r={SHARE_PAGE:"share-page",PAGE_RESTRICTIONS:"page-restrictions",CONTENT_TOOLS:"content-tools",PAGE_FAVOURITE:"page-favourite",WATCH_PAGE:"watch-page",EDIT_PAGE:"edit-page",PAGE_COMMENTS:"page-comments"}},90477:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var r=n(159394),i=n(454530),s=n(202784),a=(n(213980),n(164464)),o=n(630452),c=n(494775);const l=e=>{const{href:t,to:n}=e,l=(0,i.Z)(e,["href","to"]),d=n||t;return s.createElement(a.e,null,(({featureFlags:t})=>{const n=d&&0!==d.indexOf("/")?`/${d}`:d,i=t["confluence.frontend.people.directory"]&&!n.startsWith(c.b)?`${c.b}${n}`:n;return s.createElement(o.r,(0,r.Z)((0,r.Z)({},e),{},{href:i},l))}))};l.displayName="PeopleLink"},828361:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var r=n(202784);function i(){return r.createElement("div",{"data-testid":"restrictions-button-placeholder",style:{width:32,height:32}})}i.displayName="RestrictionsButtonPlaceholder"},199606:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,k:()=>s});var r=n(547313);const i=(0,r.Z)("span",{target:"e1vkicgf0"})({name:"hbwu8s",styles:"border:0;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;word-wrap:normal !important;"}),s=(0,r.Z)("div",{target:"e1vkicgf1"})({name:"1r1oxs8",styles:"table > thead,table > tbody{border:none;}table > thead > tr > th{padding:0;}table > tbody > tr:hover{background-color:inherit;}table > tbody > tr > td{padding:4px;}"})},157533:(e,t,n)=>{"use strict";n.d(t,{u:()=>y});var r=n(202784),i=n(984116),s=n(387179),a=n(768606);const o=(0,a.P)({__loadable_id__:"tNMe8",name:"RestrictionsDialogLoader",loader:async()=>(await Promise.all([n.e(78248),n.e(11216),n.e(44711),n.e(75301),n.e(75392),n.e(41347),n.e(72005),n.e(479),n.e(7436),n.e(46575),n.e(37382),n.e(76362),n.e(2533),n.e(68477),n.e(67703),n.e(98004),n.e(58685),n.e(36834)]).then(n.bind(n,777789))).RestrictionsDialog}),c=(0,a.P)({__loadable_id__:"6p3hN",name:"RestrictionsUpsellDialogLoader",loader:async()=>(await Promise.all([n.e(78248),n.e(11216),n.e(75392),n.e(41347),n.e(72005),n.e(7436),n.e(46575),n.e(84549)]).then(n.bind(n,616811))).RestrictionsUpsellDialog});var l=n(384684),d=n(655050),u=n(440805),p=n(841347),g=n(107970),m=n(925780),E=n(230382);const _=n.n(E)()`query IsUpsellQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id hasInheritedRestrictions hasRestrictions type}}tenant{editions{edition}}}`;function I(e){const t=(0,m.k)(e.contentId);return t?r.createElement(l.AE,{query:_,variables:{contentId:t,status:g.sY}},(({data:t,error:n,loading:i})=>{var s,a,o;if(i)return null;if(n)return(0,d.T)(n)?((0,p.Xb)(n),null):r.createElement(u.X,{error:n});const c=null!=(o=t)&&null!=(o=o.tenant)&&null!=(o=o.editions)?o.edition:o,l=Boolean(null!=(a=t)&&null!=(a=a.content)&&null!=(a=a.nodes)&&null!=(a=a[0])?a.hasRestrictions:a),g=Boolean(null!=(s=t)&&null!=(s=s.content)&&null!=(s=s.nodes)&&null!=(s=s[0])?s.hasInheritedRestrictions:s),m=l||g;return e.children({isUpsell:"FREE"===c&&!m})})):e.children({isUpsell:!1})}var h=n(356718);function y({contentId:e}){return r.createElement(i.xs,{to:[h.j]},(t=>r.createElement(I,{contentId:e},(({isUpsell:n})=>{let i;if(t.getIsOpen()){const s=e=>{t.setIsOpen(!1,null,e)};i=n?r.createElement(c,{onClose:s}):r.createElement(o,{contentId:e,triggeredFrom:t.getTriggeredFrom(),onClose:s})}return r.createElement(s.Z,null,i)}))))}y.displayName="RestrictionsDialogMountPoint"},356718:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var r=n(151119),i=n(984116);class s extends i.W2{constructor(...e){super(...e),(0,r.Z)(this,"state",{isOpen:!1,triggeredFrom:null})}getIsOpen(){return this.state.isOpen}getTriggeredFrom(){return this.state.triggeredFrom}setIsOpen(e,t=null,n){this.setState({isOpen:e,triggeredFrom:t},(()=>{n&&setTimeout(n,0)}))}}},995858:(e,t,n)=>{"use strict";n.d(t,{G:()=>Ee,L:()=>_e});var r=n(159394),i=n(151119),s=n(547313),a=n(202784),o=n(384684),c=n(984116),l=n(51681),d=(n(213980),n(412470)),u=n(334291),p=n.n(u),g=n(642426),m=n(196510),E=n(309636);const _=d.default.div`
  min-height: 136px;
  min-width: 352px;

  & div {
    white-space: initial;
    line-height: 20px;
  }
`;_.displayName="DialogContainer";const I=d.default.div`
  display: inline-block;
  position: relative;
`;I.displayName="DialogAnchor";class h extends a.Component{getContent(){const{parentData:e,isChildPage:t,onClose:n}=this.props;return a.createElement(_,null,a.createElement(E.l,{appearanceType:m.cI.INLINE,parentData:e,isChildPage:t,onUpFlowOpen:n}))}render(){const{isOpen:e,children:t,onClose:n,placement:r}=this.props;return a.createElement(g.Z,{isOpen:e,content:this.getContent(),onClose:n,placement:r||"bottom-start"},a.createElement(I,null,t))}}h.displayName="ChangeEditionInlineDialog",(0,i.Z)(h,"defaultProps",{isOpen:!1,onClose:p(),parentData:{},isChildPage:!1});var y=n(847241),A=n(325463),S=n(440805),T=n(772005),R=n(557098),C=n(501760),D=n(496054),v=n(690059),f=n(639409),w=n(107970),M=n(830691),N=n(227371),b=n(494775),O=n(302931),k=n(90477),P=n(670390),L=n(630452),x=n(828361),F=n(230382),Z=n.n(F);const U=Z()`query ContentType($contentId:ID!){content(id:$contentId){nodes{id type}}}`,B=Z()`mutation experimentalGrantAccessMutation($contentId:String!$accessType:String!$accountId:String!)@experimental{experimentalGrantAccess(contentId:$contentId accessType:$accessType accountId:$accountId){responseStatus}}`;var G,H;const j=(0,s.Z)("div",{target:"e1uakxk0"})({name:"1itck5o",styles:"width:350px;> h2{font-size:24px;}"}),W=(0,s.Z)("p",{target:"e1uakxk1"})({name:"1hzggev",styles:"font-size:14px;margin-top:10px;margin-bottom:15px;"});W.displayName="MessageContainer";const $=(0,s.Z)("div",{target:"e1uakxk2"})({name:"1kuy7z7",styles:"font-size:14px;"}),q=(0,s.Z)("div",{target:"e1uakxk3"})({name:"b3pn3b",styles:"display:inline-block;position:relative;"}),Y=(0,M.vU)({successTitle:{id:"restrictions.grant-access.success.title",defaultMessage:"Access request granted",description:"For content permissions"},errorTitle:{id:"restrictions.grant-access.error.title",defaultMessage:"Access request error",description:"For content permissions"},noMailServer:{id:"restrictions.grant-access.error.no-mail-server",defaultMessage:"Access was granted, but there is not a mail server configured so the notification could not be sent.",description:"For content permissions"},sendEmailError:{id:"restrictions.grant-access.error.send-email",defaultMessage:"Access was granted, but an unexpected error happened while sending the notification.",description:"For content permissions"},genericError:{id:"restrictions.grant-access.error.generic",defaultMessage:"Sorry, there was an unexpected error while granting access.",description:"For content permissions"},alreadyGranted:{id:"restrictions.grant-access.success.already-granted",defaultMessage:"Access was already granted to the user.",description:"For content permissions"},genericSuccess:{id:"restrictions.grant-access.success.generic",defaultMessage:"Access was granted, a notification to the user will be sent.",description:"For content permissions"}});const Q=(0,M.XN)((H=G=class extends a.PureComponent{constructor(...e){super(...e),(0,i.Z)(this,"generateGrantClickHandler",((e,t)=>{const{accessType:n,accountId:r,legacyInfo:i={username:void 0},onActionClick:s}=this.props;return()=>{e({variables:{contentId:t,accessType:n,accountId:r||i.username}}),s&&s()}})),(0,i.Z)(this,"handleDenyClick",(()=>{const{onActionClick:e}=this.props;e&&e()}))}handleGrantAccessError(e){const{formatMessage:t}=this.props.intl,n=t(Y.errorTitle);return r=>{var i,s;const a=null==r||null===(i=r.graphQLErrors)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.message;let o;o=t("412"===a?Y.noMailServer:"502"===a?Y.sendEmailError:Y.genericError),e.showErrorFlag({title:n,description:o})}}handleGrantAccessSuccess(e){const{formatMessage:t}=this.props.intl,n=t(Y.successTitle);return r=>{var i;const s=null==r||null===(i=r.experimentalGrantAccess)||void 0===i?void 0:i.responseStatus;if(!s)return void e.showErrorFlag({title:n,description:t(Y.genericError)});let a;a=t("202"===s?Y.alreadyGranted:Y.genericSuccess),e.showSuccessFlag({title:n,description:a})}}getContent(e,t,n){const{displayName:r,accessType:i,accountId:s,legacyInfo:c={username:void 0,userFullName:void 0}}=this.props;let l;var d;return l=s?a.createElement(k.Y,{target:"_blank",href:(0,P.p)(s)},r):a.createElement(L.r,{target:"_blank",href:(d=c.username,d?`${b.b}/display/~${d}`:"")},c.userFullName," (",c.username,")"),a.createElement(j,null,a.createElement(M._H,{id:"restrictions.grant-access.dialog.title",defaultMessage:"Access request",description:"title for dialog to grant access to content when requested",tagName:"h2"}),a.createElement(W,null,a.createElement(M._H,{id:"restrictions.grant-access.dialog.message",description:"Person trying to request type of access to page or blog post",defaultMessage:"{person} wants to {accessType} this {contentType, select, page {page} blogpost {blog post}}",values:{person:l,accessType:i,contentType:t}})),a.createElement($,null,a.createElement(o.mm,{mutation:B,onError:this.handleGrantAccessError(n),onCompleted:this.handleGrantAccessSuccess(n)},(t=>a.createElement(N.Z,{onClick:this.generateGrantClickHandler(t,e),"data-test-id":"grant-button"},a.createElement(M._H,{id:"restrictions.grant-access.dialog.action.grant",defaultMessage:"Grant access",description:"Button label to grant access request to content"})))),a.createElement(N.Z,{appearance:"link",onClick:this.handleDenyClick},a.createElement(M._H,{id:"restrictions.grant-access.dialog.action.deny",defaultMessage:"Deny",description:"Button label to deny access request to content"}))))}render(){const{children:e,isOpen:t,contentId:n}=this.props;return n?a.createElement(o.AE,{query:U,variables:{contentId:n}},(({data:r,loading:i})=>{var s,o,l;if(!r&&i)return a.createElement(x.D,null);const d=(null==r||null===(s=r.content)||void 0===s||null===(o=s.nodes)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.type)||"page";return a.createElement(c.xs,{to:[O.Q]},(r=>a.createElement(g.Z,{isOpen:t,content:this.getContent(n,d,r)},a.createElement(q,{"data-test-id":"inline-dialog-anchor"},e))))})):null}},(0,i.Z)(G,"defaultProps",{accessType:"view",isOpen:!1,onActionClick:()=>{},legacyInfo:{username:"",userFullName:""}}),H));var X=n(235748),z=n(617075),V=n(100431),K=n(866380),J=n(184557),ee=n.n(J),te=n(950541),ne=n.n(te),re=n(584847),ie=n.n(re),se=n(925780);const ae=Z()`query RestrictionsButtonQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id hasInheritedRestrictions hasRestrictions hasViewRestrictions}}}`,oe=(0,s.Z)("span",{target:"eltl3nx0"})({name:"wvzyhw",styles:"button{font-size:14px;}"}),ce=(0,M.vU)({noRestrictions:{id:"restrictions.button.no-restrictions.tooltip",defaultMessage:"No restrictions",description:"Tooltip explaining that the shown icon indicates absence of restrictions"},restrictionsApply:{id:"restrictions.button.restrictions-apply.tooltip",defaultMessage:"Restrictions apply",description:"Tooltip explaining that the shown icon indicates presence of restrictions"}});function le(e){const{className:t,onClick:n,markItemAsLoaded:i}=e,s=(0,se.k)(e.contentId),c=(0,a.useCallback)(((e,s)=>{const{content:o,icon:c}=function(e,t){if(e)return{content:a.createElement(M._H,(0,r.Z)({},ce.restrictionsApply)),icon:a.createElement("img",{src:ee(),"data-test-id":"locked-icon"})};if(t)return{content:a.createElement(M._H,(0,r.Z)({},ce.restrictionsApply)),icon:a.createElement("img",{src:ie(),"data-test-id":"unlocked-restricted-icon"})};return{content:a.createElement(M._H,(0,r.Z)({},ce.noRestrictions)),icon:a.createElement("img",{src:ne(),"data-test-id":"unlocked-icon"})}}(e,s);return i&&i(z.k.PAGE_RESTRICTIONS),a.createElement(a.Fragment,null,a.createElement(oe,{className:t||"","data-testid":"restriction-button"},a.createElement(K.Z,{content:o},a.createElement(V.Z,{appearance:"subtle","data-test-id":"restrictions.dialog.button",onClick:n,iconBefore:c}))),a.createElement(X.F,{name:R.q.VIEW_PAGE_RESTRICTIONS_BUTTON}))}),[t,i,n]);return s?a.createElement(o.AE,{query:ae,variables:{contentId:s,status:w.sY},fetchPolicy:"cache-and-network"},(({data:e,loading:t})=>{var n,r,i,s,o,l;if(!e&&t)return a.createElement(x.D,null);const d=Boolean(null==e||null===(n=e.content)||void 0===n||null===(r=n.nodes)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.hasViewRestrictions),u=Boolean(null==e||null===(s=e.content)||void 0===s||null===(o=s.nodes)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.hasInheritedRestrictions);return c(d,u)})):null}le.displayName="RestrictionsButton";const de=Z()`query HasRestrictionsQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id type hasInheritedRestrictions hasRestrictions ancestors{id title hasRestrictions links{webui}}}}}`;var ue=n(356718);const pe=(0,s.Z)("div",{target:"eywtb1e0"})({name:"1hp6i1l",styles:"display:inline-block;vertical-align:top;"}),ge="bottom-end";class me extends a.PureComponent{constructor(...e){super(...e),(0,i.Z)(this,"state",{grantAccessClicked:!1,showFreeRestrictionDialog:!1,hasAutoOpenedRestrictionDialog:!1}),(0,i.Z)(this,"makeHandleOpen",((e,t)=>()=>_e((0,r.Z)((0,r.Z)({},this.props),{},{actionSubjectId:"restrictionsDialogButton",dialogStateContainer:e,edition:t})))),(0,i.Z)(this,"handleGrantAccessActionClicked",(()=>{this.setState({grantAccessClicked:!0})})),(0,i.Z)(this,"handleFreeEditionPadlockClicked",(()=>{this.setState({showFreeRestrictionDialog:!0})})),(0,i.Z)(this,"onFreeDialogClosed",(()=>{this.setState({showFreeRestrictionDialog:!1})}))}hasRestrictions(e){var t,n,r,i,s,a;return Boolean((null==e||null===(t=e.content)||void 0===t||null===(n=t.nodes)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.hasRestrictions)||(null==e||null===(i=e.content)||void 0===i||null===(s=i.nodes)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.hasInheritedRestrictions))}hasInheritedRestrictionsOnly(e){var t,n,r,i,s,a;return Boolean((null==e||null===(t=e.content)||void 0===t||null===(n=t.nodes)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.hasInheritedRestrictions)&&!(null!=e&&null!==(i=e.content)&&void 0!==i&&null!==(s=i.nodes)&&void 0!==s&&null!==(a=s[0])&&void 0!==a&&a.hasRestrictions))}getParentData(e){var t,n,r;const i=null==e||null===(t=e.content)||void 0===t||null===(n=t.nodes)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.ancestors;for(let s=i.length-1;s>=0;s--)if(i[s].hasRestrictions)return i[s]}shouldShowGrantAccessDialog({grantAccess:e,displayName:t,accountId:n,username:r}){return Boolean(e&&t&&n||r)}renderFreeEditionDialog(e,t){const{contentId:n}=this.props;return a.createElement(o.AE,{query:de,variables:{contentId:n,status:w.sY}},(({data:r,loading:i,error:s})=>{var o,c,l,d;if(!r&&i||s)return a.createElement(x.D,null);const u=this.hasRestrictions(r),p=this.hasInheritedRestrictionsOnly(r),g=((null==r||null===(o=r.content)||void 0===o||null===(c=o.nodes)||void 0===c||null===(l=c[0])||void 0===l||null===(d=l.ancestors)||void 0===d?void 0:d.length)||0)-1>0;if(u){if(g&&p){const e=this.getParentData(r);return a.createElement(h,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed,parentData:e,isChildPage:g,placement:ge},a.createElement(le,{contentId:n,onClick:this.handleFreeEditionPadlockClicked}))}return t&&!this.state.hasAutoOpenedRestrictionDialog&&(this.makeHandleOpen(e,y.m.FREE)(),this.setState({hasAutoOpenedRestrictionDialog:!0})),a.createElement(le,{contentId:n,onClick:this.makeHandleOpen(e,y.m.FREE)})}return a.createElement(h,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed,placement:ge},a.createElement(le,{contentId:n,onClick:this.handleFreeEditionPadlockClicked}))}))}renderGrantAccessDialogAndButton(e,t,n,r){const{contentId:i,markItemAsLoaded:s,headerItemsLoaded:o}=this.props,c=e(),l=a.createElement(le,{contentId:i,onClick:this.makeHandleOpen(t,r),markItemAsLoaded:s});return n&&o&&!this.state.grantAccessClicked?a.createElement(Q,{isOpen:!0,contentId:i,onActionClick:this.handleGrantAccessActionClicked,accessType:"edit"===(0,v.r)(c,"accessType")?"edit":"view",accountId:(0,v.r)(c,"accountId"),displayName:(0,v.r)(c,"displayName"),legacyInfo:{username:(0,v.r)(c,"username")||"",userFullName:(0,v.r)(c,"userFullName")}},l):l}render(){return a.createElement(c.xs,{to:[ue.j]},(e=>a.createElement(pe,null,a.createElement(A.Q,null,(({loading:t,error:n,edition:r})=>n?a.createElement(S.X,{error:n}):!r||t?a.createElement(x.D,null):a.createElement(f.M.Consumer,null,(({getQueryParams:t})=>{const{displayName:n,accountId:i,grantAccess:s,username:a}=t(),o=this.shouldShowGrantAccessDialog({grantAccess:s,displayName:n,accountId:i,username:a});return"FREE"===r?this.renderFreeEditionDialog(e,o):this.renderGrantAccessDialogAndButton(t,e,o,r)})))))))}}function Ee(e){const t=(0,l._)(),n=(0,se.k)(e.contentId);return a.createElement(me,(0,r.Z)((0,r.Z)((0,r.Z)({},e),t),{},{contentId:n}))}function _e({actionSubjectId:e,createAnalyticsEvent:t,dialogStateContainer:n,edition:r,triggeredFrom:i}){const s=(0,T.OV)();s.start({name:R.q.RESTRICTIONS_DIALOG,collect(e,t){t.stopOn(e.find((({action:e,name:t})=>"taskFail"===e&&t===R.q.RESTRICTIONS_DIALOG_LOAD))),t.stopOn(e.find((e=>(0,C.K)(e)&&e.name===R.q.RESTRICTIONS_DIALOG_APPLY)))}}),s.start({name:R.q.RESTRICTIONS_DIALOG_LOAD,timeout:D.O.DEFAULT}),n.setIsOpen(!0,i),t({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:e,attributes:{source:"v2",triggeredFrom:i,edition:r}}}).fire()}me.displayName="RestrictionsDialogTriggerComponent",Ee.displayName="RestrictionsDialogTrigger"},107970:(e,t,n)=>{"use strict";n.d(t,{hc:()=>o,HE:()=>c,jy:()=>l,sY:()=>d,Hh:()=>u,Hn:()=>p,aq:()=>g});var r=n(202784),i=n(830691),s=n(199606),a=n(217118);const o=[{label:r.createElement(i._H,{id:"restrictions.dialog.permission-select.view",defaultMessage:"Can view",description:"User or group will be allowed to view content"}),value:a.vH.VIEW},{label:r.createElement(i._H,{id:"restrictions.dialog.permission-select.edit",defaultMessage:"Can edit",description:"User or group will be allowed to edit content"}),value:a.vH.EDIT}],c=r.createElement(i._H,{id:"restrictions.dialog.word.you",defaultMessage:"You",description:"current user label"}),l={cells:[{width:65,content:r.createElement(i._H,{id:"restrictions.dialog.table.header.users",defaultMessage:"User/group",description:"header text of restrictions dialog column, whose rows contain a user or a group"},(e=>r.createElement(s.E,null,e)))},{width:23,content:r.createElement(i._H,{id:"restrictions.dialog.table.header.permission",defaultMessage:"Permission",description:"header text of restrictions dialog column which contain permission select"},(e=>r.createElement(s.E,null,e)))},{width:12,content:r.createElement(i._H,{id:"restrictions.dialog.table.header.actions",defaultMessage:"Actions",description:"header text of restrictions dialog column which contain actions button"},(e=>r.createElement(s.E,null,e)))}]},d=["current","draft","archived"],u="confluence.frontend.restrictions-send-group-id",p="confluence.frontend.alphabetized.content.restrictions",g="confluence.frontend.restrictions-dialog-smart-picker"},217118:(e,t,n)=>{"use strict";let r,i,s,a,o;n.d(t,{QL:()=>r,$L:()=>i,py:()=>s,vH:()=>a,pT:()=>o}),function(e){e.NO_RESTRICTIONS="NO_RESTRICTIONS",e.RESTRICT_EDIT="RESTRICT_EDIT",e.RESTRICT_VIEW="RESTRICT_VIEW"}(r||(r={})),function(e){e.DIRECT="DIRECT",e.MULTIPLE="MULTIPLE",e.NONE="NONE",e.PAGE_INHERITED="PAGE_INHERITED",e.SPACE="SPACE"}(i||(i={})),function(e){e.GROUP="GROUP",e.USER="USER"}(s||(s={})),function(e){e.EDIT="EDIT",e.VIEW="VIEW"}(a||(a={})),function(e){e.NO_ANCESTOR_VIEW="NO_ANCESTOR_VIEW",e.NO_SPACE_VIEW="NO_SPACE_VIEW",e.NO_SPACE_EDIT="NO_SPACE_EDIT"}(o||(o={}))},925780:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(202784),i=n(491735),s=n(639409),a=n(690059);function o(e){const{contentId:t}=(0,r.useContext)(i.z),{getQueryParams:n}=(0,r.useContext)(s.M);return e||(t||(0,a.r)(n(),"draftId"))}},630452:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var r=n(159394),i=n(202784),s=n(566312),a=n(639409),o=n(283544);const c=(0,i.forwardRef)(((e,t)=>{const{children:n,className:c,target:l,testId:d,name:u,href:p=null,to:g=null,params:m={}}=e,E=(0,i.useContext)(a.M),{matchSupportedRoute:_,onPageReload:I,preloadRoute:h,toUrl:y}=E,A=t=>{I(t.target.getAttribute("href"),!1),e.onClick&&e.onClick(t)},S=e=>i.createElement("a",{href:e,className:c,onClick:A,target:l,rel:"_blank"===l?"noreferrer":void 0,"data-testid":d,ref:t},n),T=p||g;if(!T&&!u)return S("");const R=T&&{href:T},C=y(u,(0,r.Z)((0,r.Z)({},m),R)),D=_(C);if(D){const r=async()=>h(D),a=t=>{e.onClick&&e.onClick(t);const n=(0,o.H)(t,E);!t.defaultPrevented&&n&&(t.preventDefault(),E.push(n))};return i.createElement(s.Z,{to:`${D.pathname}${D.search}${D.hash}`,className:c,onClick:a,onMouseDownCapture:r,innerRef:t},n)}return S(C)}))},184557:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhNCA0IDAgMTE4IDB2MmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem0yIDBoNFY4YTIgMiAwIDEwLTQgMHYyem0yIDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},950541:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjNDI1MjZFIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},584847:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"}}]);
//# sourceMappingURL=26470.6v2Da2YnXa.js.map