(self._cf=self._cf||[]).push([[83747],{972169:(e,t,n)=>{"use strict";n.d(t,{v:()=>m});var o=n(159394),r=n(547313),a=n(202784),i=n(830691),s=n(227371),l=n(635328),c=n(590429);const d=(0,r.Z)("div",{target:"e6mtl1v0"})({name:"rp9vlg",styles:"display:flex;justify-content:flex-end;flex:1;> button{margin-right:4px;&:last-of-type{margin-right:0;}}"}),u=(0,i.vU)({unsavedHeading:{id:"comment.unsaved.warning.dialog.heading",defaultMessage:"Do you want to discard this comment?",description:"The heading text for the warning modal confirming the user wants to continue and discard their comment"},unsavedContent:{id:"comment.warning.dialog.unsaved.content",defaultMessage:"Your comment will be lost if you do.",description:"The body text for the warning modal explaining the unsaved comment content will be lost"},unsavedAction:{id:"comment.warning.dialog.unsaved.action",defaultMessage:"Discard",description:"The action text for the warning modal to discard the unsaved comment"},deleteHeading:{id:"comment.warning.dialog.delete.heading",defaultMessage:"Do you want to delete this comment?",description:"The heading text for the warning modal explaining the comment will be deleted"},deleteContent:{id:"comment.warning.dialog.delete.content",defaultMessage:"Your comment will be permanently removed if you do.",description:"The body text for the warning modal explaining the comment will be deleted and not recoverable"},deleteAction:{id:"comment.warning.dialog.delete.action",defaultMessage:"Delete",description:"The action text for the warning modal to delete the comment"}}),m=({isDelete:e,onClose:t,onConfirm:n,onCancel:r})=>{const m=()=>{n(),t()},p=()=>{r&&r(),t()},h=()=>{const t=e?u.deleteAction:u.unsavedAction;return a.createElement(l.$_,null,a.createElement(d,null,a.createElement(s.Z,{"data-cy":"comment-warning-cancel-button",onClick:p},a.createElement(i._H,{id:"comment.warning.dialog.cancel.button",defaultMessage:"Cancel",description:"The cancel button text for the comment warning modal"})),a.createElement(s.Z,{"data-cy":"comment-warning-ok-button",appearance:"warning",onClick:m},a.createElement(i._H,(0,o.Z)({},t)))))},g=e?u.deleteHeading:u.unsavedHeading,f=e?u.deleteContent:u.unsavedContent;return a.createElement(i._H,(0,o.Z)({},g),(e=>a.createElement(c.Z,{appearance:"warning",components:{Footer:h},heading:e},a.createElement(i._H,(0,o.Z)({},f)))))};m.displayName="CommentWarningDialog"},20211:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var o=n(159394),r=n(151119),a=n(202784),i=n(984116);class s extends i.W2{constructor(e){super(),(0,r.Z)(this,"showDialog",((e,t,n)=>{const r=this.nextKey,i=t||{};this.nextKey++;const s=a.createElement(e,(0,o.Z)((0,o.Z)({},i),{},{onClose:(...e)=>this.onChildClose(r,...e),onCloseComplete:(...e)=>this.onChildCloseComplete(r,...e)}),n);return this.setState((e=>({stack:[...e.stack,{key:r,component:s,alive:!0,originalProps:{onClose:i.onClose,onCloseComplete:i.onCloseComplete}}]}))),()=>{this.onChildClose(r)}})),this.nextKey=0,this.state={stack:e||[]},e&&e.forEach((e=>{this.nextKey=Math.max(this.nextKey,e.key+1)}))}onChildClose(e,...t){const n=this.state.stack.find((t=>t.key===e));n&&(n.originalProps.onClose&&n.originalProps.onClose(...t),this.setState((e=>({stack:e.stack.map((e=>e===n?(0,o.Z)((0,o.Z)({},e),{},{alive:!1}):e))}))))}onChildCloseComplete(e,...t){const n=this.state.stack.find((t=>t.key===e));n&&(n.originalProps.onCloseComplete&&n.originalProps.onCloseComplete(...t),this.setState((e=>({stack:e.stack.filter((e=>e!==n))}))))}}},462019:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var o=n(230382);const r=n.n(o)()`query GlobalOperationsQuery{globalOperations{operation targetType}}`},624588:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});const o="confluence.frontend.global-perms-view-user-profile"},31557:(e,t,n)=>{"use strict";n.d(t,{t:()=>c});var o=n(315783),r=n(624588),a=n(159394),i=n(286235),s=n(462019);const l=e=>e&&e.globalOperations&&e.globalOperations.length>0?e.globalOperations:[],c=()=>{if(!(0,o.TW)(r.q))return!0;const{data:e,error:t}=(()=>{const{loading:e,data:t,error:n}=(0,i.aM)(s._,{errorPolicy:"all",fetchPolicy:"cache-first"});if(n)return{data:[],error:n};const o={data:[],error:null};return e?o:(0,a.Z)((0,a.Z)({},o),{},{data:l(t)})})();return!!t||!!(e&&e.length>0&&e.some((e=>e&&"read"===e.operation&&"userProfile"===e.targetType)))}},343715:(e,t,n)=>{"use strict";n.d(t,{Iw:()=>a,Wx:()=>c,H1:()=>d});var o=n(470841),r=n(969861);const a=[".user-mention","[data-mention-id]",".ap-container",'a[href^="/"]','.conf-macro[data-hasbody="false"]',".status-lozenge-span",".date-lozenger-container",'[data-inline-card="true"]',".inlineCardView-content-wrap",".jira-issue",".ak-renderer-extension-overflow-container button",'[data-node-type="expand"] > button','[data-node-type="nestedExpand"] > button',".jira-issues","[data-type='file']",".code-block",'.conf-macro[data-macro-name="code"]',".pm-table-sticky-wrapper",".blockCardView-content-wrap",".ak-excerpt-include","#view-all-inline-comments-container","[extensionkey='gadget']","span[data-placeholder]","[contenteditable='false']"].join(",");function i(e){return $("<div>").append(e.cloneContents()).html()}function s(e){if(e.commonAncestorContainer){const t=e.commonAncestorContainer;return 3===t.nodeType?t.parentNode:t}}function l(e){const t=window.scrollY,n=window.scrollX;let o=e.getClientRects();if(!o.length&&e.parentElement&&e.parentElement()){const r=$(e.parentElement()),a=r.offset();a&&(o=[{top:a.top-t,left:a.left-n,bottom:a.top+(r.height()||0),right:a.left+(r.width()||0)}])}const r=function(e,t){const n={first:t[0],last:t[t.length-1]};return"undefined"!==e.endOffset&&0===e.endOffset&&t.length>1&&(n.last=t[t.length-2]),n}(e,o);return{first:function(e){const o={};return e?(o.width=e.right-e.left,o.height=e.bottom-e.top,o.left=e.left+n,o.right=e.right+n,o.top=e.top+t,o.bottom=e.bottom+t,o):o}(r.first),average:function(e,o){const r={};return r.top=e.top,r.left=(e.left||0)+n,r.bottom=o.bottom,void 0!==e.left&&void 0!==e.right&&void 0!==o.left&&void 0!==o.right&&(e.left>=o.right?r.right=e.right:r.right=o.right),r.right=(r.right||0)+n,r.top=(r.top||0)+t,r.bottom=(r.bottom||0)+t,r.width=r.right-r.left,r.height=r.bottom-r.top,r}(r.first,r.last)}}function c(e,t,n,c,d){const u=function(e){return(0,o.q)(String(e))}(t),m=u.trim();let p;return m&&(p=function(e,t,n,o,i){const s=Array.from(e.querySelectorAll(".pm-table-sticky-wrapper")),l=Array.from(e.querySelectorAll(a)),{text:c,nodesStartPos:d,nodes:u}=(0,r.nA)(e,[...l,...s]),{index:m,numMatches:p,matchTraceList:h}=(0,r.JD)(c,t,n.startContainer,n.startOffset,d,u,i),g={pageId:o,selectedText:t,index:m,numMatches:p};return h&&(g.matchTraceList=h),g}(e,u,t,n,d)),d?p.matchTraceList:{text:m,searchText:p,area:l(t),html:i(t),containingElement:s(t),range:t,lastModified:c}}function d(e,t,n){const o=c(e,t,n,null,!0);return o||[]}},969861:(e,t,n)=>{"use strict";n.d(t,{nA:()=>a,JD:()=>s});var o=n(470841);function r(e,t,n){const o=Math.min(n,e.length-1);let r=o,a=e.length;for(;r<a;){const n=r+a>>1;e[n]<=t?r=n+1:a=n}return Math.max(r-1,o)}function a(e,t){let n,r="";const a=[],i=[],s=e=>t.some((t=>t===e||t.contains(e)))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT;s.acceptNode=s;const l=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,s,!1);for(;n=l.nextNode();){const e=(0,o.q)(n.nodeValue);(" "===e||e.trim())&&(a.push(r.length),i.push(n),r+=e)}return{text:r,nodesStartPos:a,nodes:i}}function i(e){return e&&e.nodeValue?e.nodeValue.length:0}function s(e,t,n,o,a,s,l){const c=[];if(!n)return{numMatches:0,index:-1,matchTraceList:null};let d=0,u=0,m=0,p=-1,h=0;for(;-1!==(m=e.indexOf(t,d));){const e=r(a,m,u),t=s[e];let g=n;if(3===g.nodeType&&o>=i(g)&&(o-=i(g),g=n.nextSibling),g&&(3===g.nodeType&&t===g||3!==g.nodeType&&g.contains(t))){m-a[e]<=o&&(p=h)}if(l){let e=t.parentElement;const n=[];for(;e&&"content"!==e.getAttribute("id");){let t="",o="";const{tagName:r}=e,a=e.classList?e.classList.value:"",i=e.getAttributeNames().filter((e=>-1!==e.indexOf("data-")));a.length&&(t=`.${a.split(" ").join(".")}`),i.length&&i.forEach((t=>{if("data-macro-body"!==t&&"data-title"!==t){var n;const r=null===(n=e)||void 0===n?void 0:n.getAttribute(t);o+=`[${t}="${r}"]`}else o+=`[${t}]`})),n.unshift(`${r}${t}${o}`),e=e.parentElement}c.push(n.join(" > "))}h++,d=m+1,u=e}return{numMatches:h,index:p,matchTraceList:c.length?c:null}}},470841:(e,t,n)=>{"use strict";function o(e){return e.replace(/\u00a0/g," ")}n.d(t,{q:()=>o})},962432:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var o=n(159394),r=n(151119),a=n(202784),i=(n(213980),n(928316)),s=n(164464),l=n(494775),c=n(110398),d=n(670390);const u=["a.user-mention","a.confluence-userlink","a.userLogoLink","span.user-hover-trigger","img.confluence-userlink"];class m extends a.Component{constructor(...e){super(...e),(0,r.Z)(this,"renderPortal",(e=>{const{position:t}=this.props,n=e.props["data-account-id"];return i.createPortal(a.createElement(s.e,null,(({featureFlags:r})=>(e.props.href=(0,d.p)(e.props["data-account-id"],null,r["confluence.frontend.people.directory"]?l.b:""),a.createElement(c.t,{isAnonymous:!n,userId:n,position:t},a.createElement("a",(0,o.Z)({},e.props),e.props.children))))),e.placeholder)}))}shouldComponentUpdate(e){return e.node!==this.props.node}getLegacyUserElements(){const{node:e}=this.props;return e?Array.from(e.querySelectorAll(u.join(","))):[]}render(){return(0,d.ns)(this.getLegacyUserElements()).map((e=>this.renderPortal(e)))}}m.displayName="LegacyUserElementsHover"},110398:(e,t,n)=>{"use strict";n.d(t,{t:()=>u});var o=n(202784),r=n(18468),a=n(639409),i=n(367450),s=n(31557),l=n(494775),c=n(523507),d=n(670390);const u=({position:e="bottom-start",userId:t,isAnonymous:n=!1,canViewProfile:u=!0,children:m,trigger:p="hover"})=>{const{push:h}=(0,o.useContext)(a.M),g=(0,s.t)(),{userId:f,cloudId:y,featureFlags:C}=(0,i.D)();return w=f,!n&&u&&t&&w&&g?o.createElement(r.q2,{cloudId:y,userId:t,resourceClient:(0,c.F)(),position:e,trigger:p,actions:[{label:"View profile",id:"view-profile",callback:()=>(async e=>{const t=await(0,d.Rq)(e);h(t)})(t),shouldRender:e=>(e=>!!e&&e.status&&"inactive"!==e.status)(e),link:(e=>{const n=e?l.b:"";return(0,d.p)(t,"",n)})(Boolean(C["confluence.frontend.people.directory"]))}]},m):m;var w};u.displayName="ProfileCardWrapper"},523507:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var o=n(536631),r=n(18468);const a=(0,o.default)((()=>new r.Is({url:"/gateway/api/directory/graphql",cacheSize:100,cacheMaxAge:3e5})))},670390:(e,t,n)=>{"use strict";n.d(t,{p:()=>a,Rq:()=>i,Cc:()=>s,ns:()=>d});var o=n(164464),r=n(494775);const a=(e,t,n="")=>e?`${n}/people/${e}?ref=confluence${t?`&src=${encodeURIComponent(t)}`:""}`:"",i=async(e,t)=>{if(!e)return"";let n="";try{const{featureFlags:e}=await(0,o.g)();n=e["confluence.frontend.people.directory"]?r.b:""}catch(a){}return`${n}/people/${e}?ref=confluence${t?`&src=${encodeURIComponent(t)}`:""}`},s=(e,t,n="")=>e?`${n}/people/team/${e}?ref=confluence${t?`&src=${encodeURIComponent(t)}`:""}`:"",l=e=>e.getAttribute("data-account-id"),c=e=>{const t={class:"className"},n={};return(e=>Array.from(e.attributes).map((e=>e.name)))(e).forEach((o=>{n[t[o]||o]=e.getAttribute(o)})),n.dangerouslySetInnerHTML={__html:e.innerHTML},n};function d(e){return e.filter(l).map((e=>{const t=c(e);t["data-user-hover-bound"]="true",t.href=a(t["data-account-id"],null);const n=window.document.createElement("span");return e.parentNode?(e.parentNode.replaceChild(n,e),{props:t,placeholder:n}):{}}))}}}]);
//# sourceMappingURL=83747.16SJUHgaX9.js.map