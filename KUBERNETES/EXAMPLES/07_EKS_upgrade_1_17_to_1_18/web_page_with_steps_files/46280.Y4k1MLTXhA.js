(self._cf=self._cf||[]).push([[46280],{775770:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var c=a(547313);const i=e=>(0,c.Z)(e,{target:"eoul0ti0"})({name:"ktb2h4",styles:"@keyframes show{0%{opacity:0;}100%{opacity:1;}}animation:show 0.25s ease-in-out;"})},630215:(e,t,a)=>{"use strict";a.d(t,{L:()=>o});var c=a(151119),i=a(984116),n=a(869047);class o extends i.W2{constructor(...e){super(...e),(0,c.Z)(this,"state",{selectedTab:n.A.PAGE})}getSelectedTab(){return this.state.selectedTab}getSelectedTabIndex(){return this.state.selectedTab===n.A.PAGE?0:1}setSelectedTab(e){this.setState({selectedTab:e})}}},869047:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});const c={PAGE:"PAGE",SPACE:"SPACE"}},42259:(e,t,a)=>{"use strict";a.d(t,{Q:()=>he});var c=a(151119),i=a(202784),n=a(384684),o=(a(213980),a(984116)),s=a(491807),l=a(841347),r=a(164464),d=a(302931),h=a(908317),g=a(180213),p=a(655050),u=a(830691),w=a(358056),b=a(642426),m=a(25162),v=a(159394),f=a(547313),k=a(227371),C=a(179343),W=a(809256),y=a(866380),S=a(556853),B=a(621598),I=a(775770);const D="confluence.frontend.watch-dialog.refactoring-to-popup";var E,P;const x=(0,u.vU)({watchStopTooltip:{id:"watch-dialog.stop.button.tooltip",defaultMessage:"Stop watching",description:"Stop watching tooltip"},watchStartTooltip:{id:"watch-dialog.start.button.tooltip",defaultMessage:"Watch",description:"Start Watching tooltip"}}),Z=(0,f.Z)(k.Z,{target:"e6egkzf0"})({name:"1g98hqh",styles:"min-width:30px;"}),A=(0,I.J)(Z);function M(e){const t=(0,v.Z)({},e),a=t.isAnimated;return delete t.isAnimated,a?i.createElement(A,(0,v.Z)({},t)):i.createElement(Z,(0,v.Z)({},t))}M.displayName="ButtonStyle";const T=(0,s.Z)()((0,u.XN)((P=E=class extends i.PureComponent{constructor(...e){super(...e),(0,c.Z)(this,"handleClick",(()=>{this.clickAnalyticsEvent(),this.props.onClick()}))}clickAnalyticsEvent(){const{createAnalyticsEvent:e,isWatching:t}=this.props;e({type:"sendUIEvent",data:{action:t?"unwatched":"watched",actionSubject:"page-watch-button",source:"viewPageScreen"}}).fire()}render(){const{isSelected:e,intl:t,isAnimated:a,isDisabled:c,isWatching:n,triggerProps:o}=this.props,s=a?A:Z;return i.createElement(S.Z,{name:"page-watch-spotlight"},i.createElement(y.Z,{tag:"span",content:i.createElement(B.oW,{shortcut:"w",contentBefore:n?t.formatMessage(x.watchStopTooltip):t.formatMessage(x.watchStartTooltip)})},i.createElement(r.e,null,(({featureFlags:t})=>t[D]?i.createElement(s,(0,v.Z)({"data-test-id":"page-watch-button",appearance:"subtle",isDisabled:c,isSelected:e,onClick:this.handleClick,iconBefore:n?i.createElement(C.default,{label:"WatchIcon"}):i.createElement(W.default,{label:"WatchIcon"})},o)):i.createElement(M,{"data-test-id":"page-watch-button",appearance:"subtle",isDisabled:c,isSelected:e,onClick:this.handleClick,iconBefore:n?i.createElement(C.default,{label:"WatchIcon"}):i.createElement(W.default,{label:"WatchIcon"}),isAnimated:a,"aria-expanded":e})))))}},(0,c.Z)(E,"defaultProps",{isAnimated:!0}),P)));var _=a(679286),U=a(20211),N=a(491735);const R=(0,a(768606).P)({__loadable_id__:"eZPik",name:"ManageWatcherDialogLoader",loader:async()=>(await Promise.all([a.e(78248),a.e(11216),a.e(44711),a.e(75301),a.e(75392),a.e(41347),a.e(72005),a.e(479),a.e(37382),a.e(67703),a.e(58685),a.e(33731),a.e(60551)]).then(a.bind(a,522606))).ManageWatcherDialog});var O=a(869047),q=a(630215);class $ extends i.PureComponent{constructor(...e){super(...e),(0,c.Z)(this,"makeClickHandler",(({dialogs:e,contentId:t,spaceKey:a,tabSwitcher:c})=>()=>{c.setSelectedTab(this.props.defaultTab),e.showDialog(R,{contentId:t,spaceKey:a}),this.props.onClick()}))}render(){const{contentId:e}=this.props;return i.createElement(h.S,{attribution:g.x.BACKBONE},i.createElement(N.z.Consumer,null,(({spaceKey:t})=>i.createElement(o.xs,{to:[U.l,q.L]},((a,c)=>i.createElement(k.Z,{"data-test-id":"manage-watcher-button",spacing:"none",onClick:this.makeClickHandler({dialogs:a,contentId:e,spaceKey:t,tabSwitcher:c}),appearance:"link"},i.createElement(u._H,{id:"manage-watcher-dialog.watcher.button",defaultMessage:"Manage watchers",description:"The button to open manage watchers dialog."})))))))}}$.displayName="ManageWatcherButton",(0,c.Z)($,"defaultProps",{defaultTab:O.A.PAGE,onClick:()=>null});const Q=(0,u.vU)({watchingSpaceTitle:{id:"watch-dialog.title.watching.space",defaultMessage:"You are watching this space",description:"Title for Watch dialog when watching space"},watchingSpaceDescription:{id:"watch-dialog.title.watching.space.description",defaultMessage:"Receiving email updates for all content in this space.",description:"Description for Watch dialog when watching space"},watchingBlogAndBlogsTitle:{id:"watch-dialog.title.watching.blog.and.blogs",defaultMessage:"You are watching this blog post",description:"Title for Watch dialog when watching blog and blog space"},watchingBlogAndBlogsDescription:{id:"watch-dialog.title.watching.blog.and.blogs.description",defaultMessage:"Receiving email updates about changes to this blog post and all new blog posts in this space.",description:"Description for Watch dialog when watching blog and blog space"},watchingBlogTitle:{id:"watch-dialog.title.watching.blog",defaultMessage:"You are watching this blog post",description:"Title for Watch dialog when watching blog"},watchingBlogDescription:{id:"watch-dialog.title.watching.blog.description",defaultMessage:"Receiving email updates about changes to this blog post.",description:"Description for Watch dialog when watching blog"},watchingPageTitle:{id:"watch-dialog.title.watching.page",defaultMessage:"You are watching this page",description:"Title for Watch dialog when watching page"},watchingPageDescription:{id:"watch-dialog.title.watching.page.description",defaultMessage:"Receiving email updates about changes to this page.",description:"Description for Watch dialog when watching page"},watchingBlogsTitle:{id:"watch-dialog.title.watching.blogs",defaultMessage:"You are watching for new blog posts",description:"Title for Watch dialog when watching blog space"},watchingBlogsDescription:{id:"watch-dialog.title.watching.blogs.description",defaultMessage:"Receiving email updates for new blog posts in this space.",description:"Description for Watch dialog when watching blog space"},watchingNothingBlogTitle:{id:"watch-dialog.title.watching.nothing.blog",defaultMessage:"You are not watching this blog",description:"Title for Watch dialog when not watching blog"},watchingNothingBlogDescription:{id:"watch-dialog.title.watching.nothing.blogs.description",defaultMessage:"Start watching to receive email updates about changes to this blog.",description:"Description for Watch dialog when not watching blog"},watchingNothingPageTitle:{id:"watch-dialog.title.watching.nothing.page",defaultMessage:"You are not watching this page",description:"Title for Watch dialog when not watching page"},watchingNothingPageDescription:{id:"watch-dialog.title.nothing.watching.page.description",defaultMessage:"Start watching to receive email updates about changes to this page.",description:"Description for Watch dialog when not watching page"},watchPage:{id:"watch-dialog.page",defaultMessage:"Watch page",description:"Watch page - checkbox label"},watchBlog:{id:"watch-dialog.blog",defaultMessage:"Watch blog post",description:"Watch blog post - checkbox label"},watchBlogs:{id:"watch-dialog.blogs",defaultMessage:"Watch for new blog posts in this space",description:"Watch for blog posts - checkbox label"},watchSpace:{id:"watch-dialog.space",defaultMessage:"Watch all content in this space",description:"Watch space -  checkbox label"},watchDisabledPageToolTip:{id:"watch-dialog.disabledpage.tooltip",defaultMessage:"You will receive updates for this page because you are watching this space",description:"Watching space tooltip for page"},watchDisabledBlogsToolTip:{id:"watch-dialog.disabledblogs.tooltip",defaultMessage:"You are subscribed to all blog posts because you are watching this space",description:"Watching space tooltip for blogs"},manageWatchers:{id:"watch-dialog.manage",defaultMessage:"Manage watchers",description:"Manage watchers link"}}),Y=(0,f.Z)("div",{target:"e16a910o0"})({name:"b983i2",styles:"margin:16px 0 0 0;"}),j=(0,f.Z)("div",{target:"e16a910o1"})({name:"a952hd",styles:"width:325px;"}),z=(0,u.XN)((0,s.Z)()(class extends i.PureComponent{constructor(...e){super(...e),(0,c.Z)(this,"state",{isCurrentUserWatchingSpace:this.props.params.isWatchingSpace,isCurrentUserWatchingPage:this.props.params.isWatchingPage,isCurrentUserWatchingBlogs:this.props.params.isWatchingBlogs}),(0,c.Z)(this,"watchPageChanged",(()=>{const{contentId:e,watchContent:t,unwatchContent:a}=this.props,{isCurrentUserWatchingPage:c}=this.state;c?(a({variables:{id:e},optimisticResponse:{__typename:"Mutation",unwatchContent:{__typename:"WatchContentPayload",content:{__typename:"Content",id:e,currentUserIsWatching:!1}}}}),this.setState({isCurrentUserWatchingPage:!1})):(t({variables:{id:e},optimisticResponse:{__typename:"Mutation",watchContent:{__typename:"WatchContentPayload",content:{__typename:"Content",id:e,currentUserIsWatching:!0}}}}),this.setState({isCurrentUserWatchingPage:!0}))})),(0,c.Z)(this,"watchSpaceChanged",(()=>{const{spaceId:e,watchSpace:t,unwatchSpace:a}=this.props,{isCurrentUserWatchingSpace:c}=this.state;c?(a({variables:{spaceId:e},optimisticResponse:{__typename:"Mutation",unwatchSpace:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:e,currentUser:{__typename:"SpaceUserMetadata",isWatched:!1}}}}}),this.setState({isCurrentUserWatchingSpace:!1})):(t({variables:{spaceId:e},optimisticResponse:{__typename:"Mutation",watchSpace:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:e,currentUser:{__typename:"SpaceUserMetadata",isWatched:!0}}}}}),this.setState({isCurrentUserWatchingSpace:!0}))})),(0,c.Z)(this,"watchBlogsChanged",(()=>{const{spaceId:e,watchBlogs:t,unwatchBlogs:a}=this.props,{isCurrentUserWatchingBlogs:c}=this.state;c?(a({variables:{spaceId:e},optimisticResponse:{__typename:"Mutation",unwatchBlogs:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:e,currentUser:{__typename:"SpaceUserMetadata",isWatchingBlogs:!1}}}}}),this.setState({isCurrentUserWatchingBlogs:!1})):(t({variables:{spaceId:e},optimisticResponse:{__typename:"Mutation",watchBlogs:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:e,currentUser:{__typename:"SpaceUserMetadata",isWatchingBlogs:!0}}}}}),this.setState({isCurrentUserWatchingBlogs:!0}))})),(0,c.Z)(this,"populateTitleAndDescription",(()=>{const{params:e}=this.props;let t={};return t=e.isWatchingSpace?{title:Q.watchingSpaceTitle,description:Q.watchingSpaceDescription}:e.isBlogPost?e.isWatchingBlogs&&e.isWatchingPage?{title:Q.watchingBlogAndBlogsTitle,description:Q.watchingBlogAndBlogsDescription}:e.isWatchingPage?{title:Q.watchingBlogTitle,description:Q.watchingBlogDescription}:e.isWatchingBlogs?{title:Q.watchingBlogsTitle,description:Q.watchingBlogsDescription}:{title:Q.watchingNothingBlogTitle,description:Q.watchingNothingBlogDescription}:e.isWatchingPage?{title:Q.watchingPageTitle,description:Q.watchingPageDescription}:{title:Q.watchingNothingPageTitle,description:Q.watchingNothingPageDescription},i.createElement("div",null,i.createElement(u._H,(0,v.Z)((0,v.Z)({},t.title),{},{tagName:"h2"})),i.createElement(Y,null,i.createElement(u._H,(0,v.Z)({},t.description))))})),(0,c.Z)(this,"fireAnalyticsEvent",(e=>()=>{this.props.createAnalyticsEvent({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"ManageWatcherDialogButton",source:"WatchDialogContent",attributes:{source:e}}}).fire()}))}render(){const{contentId:e,defaultTab:t,params:a,intl:c}=this.props;return i.createElement(j,null,this.populateTitleAndDescription(),i.createElement(Y,null,i.createElement(y.Z,{content:a.isWatchingSpace?c.formatMessage(Q.watchDisabledPageToolTip):""},i.createElement(_.X,{testId:"watch-page-checkbox",label:a.isBlogPost?c.formatMessage(Q.watchBlog):c.formatMessage(Q.watchPage),value:"val1",onChange:this.watchPageChanged,isChecked:a.isWatchingPage||a.isWatchingSpace,isDisabled:a.isWatchingSpace,name:"watch-page"})),a.isBlogPost?i.createElement(y.Z,{content:a.isWatchingSpace?c.formatMessage(Q.watchDisabledBlogsToolTip):""},i.createElement(_.X,{testId:"watch-blogs-checkbox",label:c.formatMessage(Q.watchBlogs),value:"val",onChange:this.watchBlogsChanged,isChecked:a.isWatchingBlogs||a.isWatchingSpace,isDisabled:a.isWatchingSpace,name:"watch-blogs"})):"",i.createElement(_.X,{testId:"watch-space-checkbox",label:c.formatMessage(Q.watchSpace),value:"val2",onChange:this.watchSpaceChanged,isChecked:a.isWatchingSpace,name:"watch-space"})),a.isAdmin?i.createElement(Y,null,i.createElement($,{contentId:e,defaultTab:t,onClick:this.fireAnalyticsEvent("v2")})):"")}}));const L=(0,u.vU)({watchPageNotification:{id:"watch-dialog.notification.start.watching.page",defaultMessage:"You started watching this page.",description:"start watching page notification"},unwatchPageNotification:{id:"watch-dialog.notification.stop.watching.page",defaultMessage:"You stopped watching this page.",description:"stop watching page notification"},watchBlogNotification:{id:"watch-dialog.notification.start.watching.blog",defaultMessage:"You started watching this blog.",description:"start watching blog notification"},unwatchBlogNotification:{id:"watch-dialog.notification.stop.watching.blog",defaultMessage:"You stopped watching this blog.",description:"stop watching blog notification"}}),F=(0,u.XN)(class extends i.PureComponent{constructor(...e){super(...e),(0,c.Z)(this,"state",{dialogOpen:!1}),(0,c.Z)(this,"toggleDialog",(()=>{this.props.isDisabled||this.setState((e=>({dialogOpen:!e.dialogOpen})))})),(0,c.Z)(this,"handleShortcutClick",(()=>{const{contentId:e,params:t,watchContent:a,unwatchContent:c,flagsContainer:i,intl:n}=this.props;t.isWatchingSpace?this.setState({dialogOpen:!0}):t.isWatchingPage?c({variables:{id:e}}).then((()=>{i.showSuccessFlag({title:n.formatMessage(t.isBlogPost?L.unwatchBlogNotification:L.unwatchPageNotification),close:"auto"})})):a({variables:{id:e}}).then((()=>{i.showSuccessFlag({title:n.formatMessage(t.isBlogPost?L.watchBlogNotification:L.watchPageNotification),close:"auto"})}))})),(0,c.Z)(this,"closeDialog",(()=>{this.setState({dialogOpen:!1})})),(0,c.Z)(this,"renderPopupTrigger",(e=>{const{isAnimated:t,isDisabled:a,customTrigger:c}=this.props,n=c||T;return i.createElement(n,{isDisabled:a,isWatching:this.isWatching(),isSelected:this.state.dialogOpen,onClick:this.toggleDialog,isAnimated:t,triggerProps:e})})),(0,c.Z)(this,"renderPopupContent",(()=>{const{contentId:e,spaceId:t,params:a,watchContent:c,defaultTab:n,unwatchContent:o,watchSpace:s,unwatchSpace:l,watchBlogs:r,unwatchBlogs:d}=this.props;return i.createElement("div",{style:{padding:"24px 16px"}},i.createElement(z,{contentId:e,spaceId:t,defaultTab:n,params:a,watchContent:c,unwatchContent:o,watchSpace:s,unwatchSpace:l,watchBlogs:r,unwatchBlogs:d}))})),(0,c.Z)(this,"renderPopupDialog",(()=>{const{customPlacement:e}=this.props;return i.createElement(w.Z,{isOpen:this.state.dialogOpen,onClose:this.closeDialog,content:this.renderPopupContent,trigger:this.renderPopupTrigger,placement:e})})),(0,c.Z)(this,"renderOldInlineDialog",(()=>{const{contentId:e,spaceId:t,params:a,watchContent:c,defaultTab:n,unwatchContent:o,watchSpace:s,unwatchSpace:l,watchBlogs:r,unwatchBlogs:d,customPlacement:h,isAnimated:g,isDisabled:p,customTrigger:u}=this.props,w=u||T;return i.createElement(b.Z,{onClose:this.closeDialog,content:i.createElement(z,{contentId:e,spaceId:t,defaultTab:n,params:a,watchContent:c,unwatchContent:o,watchSpace:s,unwatchSpace:l,watchBlogs:r,unwatchBlogs:d}),isOpen:this.state.dialogOpen,placement:h},i.createElement(w,{isDisabled:p,isWatching:this.isWatching(),isSelected:this.state.dialogOpen,onClick:this.toggleDialog,isAnimated:g}))}))}isWatching(){const{isDisabled:e,params:t}=this.props;return!e&&(t.isWatchingPage||t.isBlogPost&&t.isWatchingBlogs||t.isWatchingSpace)}render(){const{isDisabled:e,useShortcut:t}=this.props;return i.createElement(i.Fragment,null,t&&!e?i.createElement(m.S,{accelerator:"w",listener:this.handleShortcutClick}):null,i.createElement(r.e,null,(({featureFlags:e})=>e[D]?this.renderPopupDialog():this.renderOldInlineDialog())))}});var G=a(100431),X=a(996541),H=a(767874);const K=(0,f.Z)(G.Z,{target:"e6wl6fc0"})({name:"yrqdi7",styles:"min-width:30px;padding-left:2px;padding-right:2px;"}),J=()=>i.createElement(X.uP,{metricName:H.u2.SSR_WATCH_BUTTON},i.createElement(K,{testId:"watch-button-placeholder",appearance:"subtle",iconBefore:i.createElement(W.default,{label:"WatchIcon"}),isDisabled:!0}));J.displayName="WatchButtonPlaceholder";var V=a(230382),ee=a.n(V),te=a(801348);const ae=ee()`query WatchDialogQuery($contentId:ID!){singleContent(id:$contentId){id ...WatchDialogContentFragment}}${te.E}`,ce=ee()`mutation WatchDialogWatchContentMutation($id:ID!){watchContent(watchContentInput:{contentId:$id currentUser:true}){content{id currentUserIsWatching}}}`,ie=ee()`mutation WatchDialogUnwatchContentMutation($id:ID!){unwatchContent(watchContentInput:{contentId:$id currentUser:true}){content{id currentUserIsWatching}}}`,ne=ee()`mutation WatchDialogWatchSpaceMutation($spaceId:ID!){watchSpace(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatched}}}}`,oe=ee()`mutation WatchDialogUnwatchSpaceMutation($spaceId:ID!){unwatchSpace(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatched}}}}`,se=ee()`mutation WatchDialogWatchBlogsMutation($spaceId:ID!){watchBlogs(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatchingBlogs}}}}`,le=ee()`mutation WatchDialogUnwatchBlogsMutation($spaceId:ID!){unwatchBlogs(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatchingBlogs}}}}`;var re,de;const he=(0,s.Z)()((de=re=class extends i.PureComponent{constructor(...e){super(...e),(0,c.Z)(this,"updateUnwatchBlogs",((e,{data:{unwatchBlogs:t}})=>{const{contentId:a}=this.props,c=e.readQuery({query:ae,variables:{contentId:a}});c.singleContent.space.currentUser.isWatchingBlogs=t.space.currentUser.isWatchingBlogs,e.writeQuery({query:ae,data:c})})),(0,c.Z)(this,"updateWatchBlogs",((e,{data:{watchBlogs:t}})=>{const{contentId:a}=this.props,c=e.readQuery({query:ae,variables:{contentId:a}});c.singleContent.space.currentUser.isWatchingBlogs=t.space.currentUser.isWatchingBlogs,e.writeQuery({query:ae,data:c})})),(0,c.Z)(this,"updateWatchSpace",((e,{data:{watchSpace:t}})=>{const{contentId:a}=this.props,c=e.readQuery({query:ae,variables:{contentId:a}});c.singleContent.space.currentUser.isWatched=t.space.currentUser.isWatched,e.writeQuery({query:ae,data:c})})),(0,c.Z)(this,"updateUnwatchSpace",((e,{data:{unwatchSpace:t}})=>{const{contentId:a}=this.props,c=e.readQuery({query:ae,variables:{contentId:a}});c.singleContent.space.currentUser.isWatched=t.space.currentUser.isWatched,e.writeQuery({query:ae,data:c})})),(0,c.Z)(this,"updateWatchContent",((e,{data:{watchContent:t}})=>{const{contentId:a}=this.props,c=e.readQuery({query:ae,variables:{contentId:a}});c.singleContent.currentUserIsWatching=t.content.currentUserIsWatching,e.writeQuery({query:ae,data:c})})),(0,c.Z)(this,"updateUnwatchContent",((e,{data:{unwatchContent:t}})=>{const{contentId:a}=this.props,c=e.readQuery({query:ae,variables:{contentId:a}});c.singleContent.currentUserIsWatching=t.content.currentUserIsWatching,e.writeQuery({query:ae,data:c})})),(0,c.Z)(this,"unwatchBlogAnalytics",(()=>{this.fireAnalyticsEvent("unwatch","blogs")})),(0,c.Z)(this,"watchBlogAnalytics",(()=>{this.fireAnalyticsEvent("watch","blogs")})),(0,c.Z)(this,"unwatchSpaceAnalytics",(()=>{this.fireAnalyticsEvent("unwatch","space")})),(0,c.Z)(this,"watchSpaceAnalytics",(()=>{this.fireAnalyticsEvent("watch","space")})),(0,c.Z)(this,"unwatchContentAnalytics",(()=>{this.fireAnalyticsEvent("unwatch","content")})),(0,c.Z)(this,"watchContentAnalytics",(()=>{this.fireAnalyticsEvent("watch","content")}))}fireAnalyticsEvent(e,t){const{contentId:a,createAnalyticsEvent:c}=this.props;c({type:"sendTrackEvent",data:{action:e,actionSubject:t,actionSubjectId:a,source:"WatchDialog",attributes:{componentVersion:"v2"}}}).fire()}render(){const{contentId:e,defaultTab:t,customPlacement:a,onRender:c,isAnimated:s,customTrigger:u,useShortcut:w}=this.props;return e?i.createElement(h.S,{attribution:g.x.COLLABORATION},i.createElement(r.e,null,(({isLicensed:r,userId:h})=>h?i.createElement(o.xs,{to:[d.Q]},(o=>i.createElement(n.AE,{query:ae,variables:{contentId:e},skip:!r},(({data:d,loading:h,error:g})=>{var b,m,v,f,k,C;if(g)return(0,p.T)(g)&&(0,l.Xb)(g),null;if(h)return i.createElement(J,null);const W=null!=(C=d)&&null!=(C=C.singleContent)&&null!=(C=C.space)?C.id:C,y={isWatchingPage:null!=(k=d)&&null!=(k=k.singleContent)?k.currentUserIsWatching:k,isWatchingSpace:null!=(f=d)&&null!=(f=f.singleContent)&&null!=(f=f.space)&&null!=(f=f.currentUser)?f.isWatched:f,isBlogPost:"blogpost"===(null!=(v=d)&&null!=(v=v.singleContent)?v.type:v),isWatchingBlogs:null!=(m=d)&&null!=(m=m.singleContent)&&null!=(m=m.space)&&null!=(m=m.currentUser)?m.isWatchingBlogs:m,isAdmin:(S=(null!=(b=d)&&null!=(b=b.singleContent)&&null!=(b=b.space)?b.operations:b)||[],Boolean(S.find((e=>"space"===e.targetType&&"administer"===e.operation))))};var S;return i.createElement(n.mm,{mutation:le,onCompleted:this.unwatchBlogAnalytics,update:this.updateUnwatchBlogs},(l=>i.createElement(n.mm,{mutation:se,onCompleted:this.watchBlogAnalytics,update:this.updateWatchBlogs},(d=>i.createElement(n.mm,{mutation:oe,onCompleted:this.unwatchSpaceAnalytics,update:this.updateUnwatchSpace},(h=>i.createElement(n.mm,{mutation:ne,onCompleted:this.watchSpaceAnalytics,update:this.updateWatchSpace},(g=>i.createElement(n.mm,{mutation:ie,onCompleted:this.unwatchContentAnalytics,update:this.updateUnwatchContent},(p=>i.createElement(n.mm,{mutation:ce,onCompleted:this.watchContentAnalytics,update:this.updateWatchContent},(n=>(c(),i.createElement(F,{contentId:e,spaceId:W,params:y,defaultTab:t,watchContent:n,unwatchContent:p,watchSpace:g,unwatchSpace:h,watchBlogs:d,unwatchBlogs:l,flagsContainer:o,customPlacement:a,isAnimated:s,isDisabled:!r,customTrigger:u,useShortcut:w}))))))))))))))})))):null))):null}},(0,c.Z)(re,"defaultProps",{onRender:()=>{},useShortcut:!0}),de))},801348:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var c=a(230382);const i=a.n(c)()`fragment WatchDialogContentFragment on Content{id currentUserIsWatching type space{id key currentUser{isWatched isWatchingBlogs}operations{operation targetType}}}`},679286:(e,t,a)=>{"use strict";a.d(t,{X:()=>B,Z:()=>I});var c=a(454530),i=a(607560),n=a(202784),o=a(847134),s=a(790040),l=a(805508),r=a(175612);const d={name:"1hn6i95",styles:"-webkit-appearance:none;-moz-appearance:none;margin:0;& + svg{--checkbox-background-color:var(--local-background);--checkbox-border-color:var(--local-border);--checkbox-tick-color:var(--local-tick-rest);color:var(--checkbox-background-color);fill:var(--checkbox-tick-color);transition:color 0.2s ease-in-out,fill 0.2s ease-in-out;flex-shrink:0;align-self:flex-start;}& + svg rect:first-of-type{stroke:var(--checkbox-border-color);stroke-width:2px;transition:stroke 0.2s ease-in-out;}&&:focus + svg,&&:checked:focus + svg{--checkbox-border-color:var(--local-border-focus);}&:hover + svg{--checkbox-background-color:var(--local-background-hover);--checkbox-border-color:var(--local-border-hover);}&:checked:hover + svg{--checkbox-background-color:var(--local-background-checked-hover);--checkbox-border-color:var(--local-border-checked-hover);}&:checked + svg{--checkbox-background-color:var(--local-background-checked);--checkbox-border-color:var(--local-border-checked);--checkbox-tick-color:var(--local-tick-checked);}&[data-invalid] + svg{--checkbox-border-color:var(--local-border-invalid);}&:checked[data-invalid] + svg{--checkbox-border-color:var(--local-border-checked-invalid);}&:active + svg{--checkbox-background-color:var(--local-background-active);--checkbox-border-color:var(--local-border-active);}&:checked:active + svg{--checkbox-tick-color:var(--local-tick-active);--checkbox-background-color:var(--local-background-active);--checkbox-border-color:var(--local-border-active);}&:disabled + svg,&:disabled:hover + svg,&:disabled:focus + svg,&:disabled:active + svg,&:disabled[data-invalid] + svg{--checkbox-background-color:var(--local-background-disabled);--checkbox-border-color:var(--local-border-disabled);pointer-events:none;cursor:not-allowed;}&:disabled:checked + svg{--checkbox-tick-color:var(--local-tick-disabled);}"},h={light:{borderColor:{rest:r.N40,disabled:r.N20,checked:r.B400,active:r.B50,invalid:r.R300,invalidAndChecked:r.R300,focused:r.B100,hovered:r.N40,hoveredAndChecked:r.B300},boxColor:{rest:r.N10,disabled:r.N20,active:r.B50,hoveredAndChecked:r.B300,hovered:r.N30,checked:r.B400},tickColor:{disabledAndChecked:r.N70,activeAndChecked:r.B400,checked:r.N10}},dark:{borderColor:{rest:r.DN80,disabled:r.DN10,checked:r.B400,active:r.B200,invalid:r.R300,invalidAndChecked:r.R300,focused:r.B75,hovered:r.DN200,hoveredAndChecked:r.B75},boxColor:{rest:r.DN10,disabled:r.DN10,active:r.B200,hoveredAndChecked:r.B75,hovered:r.DN30,checked:r.B400},tickColor:{disabledAndChecked:r.DN90,activeAndChecked:r.DN10,checked:r.DN10}}},g=e=>{const t=h[e],a=t.boxColor,c=t.tickColor,i=t.borderColor;return[(0,o.iv)("& + svg{--local-background:",a.rest,";--local-background-hover:",a.hovered,";--local-background-active:",a.active,";--local-background-checked:",a.checked,";--local-background-checked-hover:",a.hoveredAndChecked,";--local-background-disabled:",a.disabled,";--local-tick-rest:transparent;--local-tick-checked:",c.checked,";--local-tick-disabled:",c.disabledAndChecked,";--local-tick-active:",c.activeAndChecked,";--local-border:",i.rest,";--local-border-disabled:",i.disabled,";--local-border-checked:",i.checked,";--local-border-active:",i.active,";--local-border-invalid:",i.invalid,";--local-border-focus:",i.focused,";--local-border-hover:",i.hovered,";--local-border-checked-hover:",i.hoveredAndChecked,";--local-border-checked-invalid:",i.invalidAndChecked,";}"),d]};var p=a(442298);const u=(0,p.I8)();function w({children:e,isDisabled:t,testId:a}){const c=(0,n.useMemo)((()=>({fontFamily:u,alignItems:"center",display:"flex",color:r.N900,cursor:"default","&[data-disabled]":{color:r.N80,cursor:"not-allowed"}})),[]);return(0,o.tZ)("label",{css:c,"data-testid":a,"data-disabled":t||void 0},e)}const b=.5*(0,p.ww)(),m={paddingRight:b,paddingLeft:b};function v({children:e}){return(0,o.tZ)("span",{css:m},e)}const f=.25*(0,p.ww)()+"px";function k(e){return(0,o.tZ)("span",(0,i.Z)({css:{color:r.R500,paddingLeft:f}},e),"*")}const C=JSON.parse('{"u2":"@atlaskit/checkbox","i8":"12.0.0"}'),W={small:"16",medium:"24",large:"32",xlarge:"48"},y=(0,n.memo)((({size:e,isIndeterminate:t})=>(0,o.tZ)("svg",{width:W[e],height:W[e],viewBox:"0 0 24 24"},(0,o.tZ)("g",{fillRule:"evenodd"},(0,o.tZ)("rect",{fill:"currentColor",x:"6",y:"6",width:"12",height:"12",rx:"2"}),t?(0,o.tZ)("rect",{fill:"inherit",x:"8",y:"11",width:"8",height:"2",rx:"1"}):(0,o.tZ)("path",{d:"M9.707 11.293a1 1 0 1 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4a1 1 0 1 0-1.414-1.414L11 12.586l-1.293-1.293z",fill:"inherit"}))))),S=(0,n.forwardRef)((function(e,t){const{isChecked:a,isDisabled:l=!1,isInvalid:r=!1,defaultChecked:d=!1,isIndeterminate:h=!1,size:p="medium",onChange:u,analyticsContext:b,label:m,mode:f,name:W,value:S,isRequired:B,testId:I}=e,D=(0,c.Z)(e,["isChecked","isDisabled","isInvalid","defaultChecked","isIndeterminate","size","onChange","analyticsContext","label","mode","name","value","isRequired","testId"]),[E,P]=(0,n.useState)(void 0!==a?a:d),x=(0,n.useCallback)(((e,t)=>{P(e.target.checked),u&&u(e,t)}),[u]),Z=(0,s.B)({fn:x,action:"changed",analyticsData:b,componentName:"checkbox",packageName:C.u2,packageVersion:C.i8}),A=void 0===a?E:a,M=(0,n.useMemo)((()=>g(f)),[f]);return(0,o.tZ)(w,{isDisabled:l,testId:I&&`${I}--checkbox-label`},(0,o.tZ)("input",(0,i.Z)({},D,{type:"checkbox",ref:t,disabled:l,checked:A,value:S,name:W,required:B,css:M,onChange:Z,"aria-checked":h?"mixed":A,"data-testid":I&&`${I}--hidden-checkbox`,"data-invalid":r?"true":void 0})),(0,o.tZ)(y,{size:p,isIndeterminate:h}),(0,o.tZ)(v,null,m,B&&(0,o.tZ)(k,{"aria-hidden":"true"})))})),B=(0,n.memo)((0,n.forwardRef)((function(e,t){return(0,o.tZ)(l.Z.Consumer,null,(({mode:a})=>(0,o.tZ)(S,(0,i.Z)({},e,{ref:t,mode:a}))))})));B.displayName="Checkbox";const I=B},295492:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(202784)),i=n(a(382600));function n(e){return e&&e.__esModule?e:{default:e}}const o=e=>c.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M4.02 19.23a1 1 0 001.18 1.18l3.81-.78-4.21-4.21-.78 3.81zm5.921-2.62l-2.12-2.12L16.306 6h.002l2.121 2.121-8.489 8.49zm9.903-9.903l-2.12-2.122A1.997 1.997 0 0016.308 4c-.512 0-1.024.195-1.415.585l-9.757 9.758 4.95 4.95 9.757-9.758a2 2 0 000-2.828z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));o.displayName="EditIcon";var s=o;t.default=s},179343:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(202784)),i=n(a(382600));function n(e){return e&&e.__esModule?e:{default:e}}const o=e=>c.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M11.983 15.984a4.005 4.005 0 01-4.002-4c0-2.206 1.795-4 4.002-4a4.005 4.005 0 014.002 4c0 2.206-1.795 4-4.002 4M12 4C6.48 4 2 8.84 2 12c0 3.086 4.577 8 10 8s10-4.914 10-8c0-3.16-4.481-8-10-8"/><circle cx="12" cy="12" r="2"/></g></svg>'},e));o.displayName="WatchFilledIcon";var s=o;t.default=s},809256:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(202784)),i=n(a(382600));function n(e){return e&&e.__esModule?e:{default:e}}const o=e=>c.default.createElement(i.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M12 18c-4.536 0-7.999-4.26-7.999-6 0-2.001 3.459-6 8-6 4.376 0 7.998 3.973 7.998 6 0 1.74-3.462 6-7.998 6m0-14C6.48 4 2 8.841 2 12c0 3.086 4.576 8 10 8 5.423 0 10-4.914 10-8 0-3.159-4.48-8-10-8"/><path d="M11.977 13.984c-1.103 0-2-.897-2-2s.897-2 2-2c1.104 0 2 .897 2 2s-.896 2-2 2m0-6c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.207 0 4-1.794 4-4s-1.793-4-4-4"/></g></svg>'},e));o.displayName="WatchIcon";var s=o;t.default=s}}]);
//# sourceMappingURL=46280.Y4k1MLTXhA.js.map