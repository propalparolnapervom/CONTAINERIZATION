(self._cf=self._cf||[]).push([[97629],{781248:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var r=n(683591);const a={[r.X.DEFAULT]:"full-page",[r.X.FULL_WIDTH]:"full-width"},s=e=>{const t=a[e];return t||o()},o=()=>a[r.X.DEFAULT]},703730:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(230382),a=n.n(r),s=n(604919);const o=a()`query ContentRendererQuery($contentId:ID$status:[String]){content(id:$contentId status:$status){nodes{id body{atlas_doc_format{value}}space{id key}type ...contentAppearancePublishedFragment}}}${s.O}`},651291:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var r=n(151119),a=n(984116);class s extends a.W2{constructor(...e){super(...e),(0,r.Z)(this,"state",{ready:null,permissions:{}}),(0,r.Z)(this,"setReady",(e=>{this.setNewState(1,e)})),(0,r.Z)(this,"setNoPermission",(e=>{this.setNewState(2,e)})),(0,r.Z)(this,"setNotFound",(e=>{this.setNewState(3,e)})),(0,r.Z)(this,"setError",(e=>{this.setNewState(4,e)})),(0,r.Z)(this,"reset",(e=>{this.setNewState(null,e)})),(0,r.Z)(this,"setPermissions",(e=>{this.state.permissions=this.checkPermissions(e)}))}setNewState(e,t){this.setState({ready:e,permissions:this.checkPermissions(t)})}checkPermissions(e){return void 0===e?this.state.permissions:null===e?{}:e}}},716847:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(768606).P)({__loadable_id__:"YJqem",name:"DeepLinkHandler",loader:async()=>(await n.e(99736).then(n.bind(n,99736))).DeepLinkHandler})},169039:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o,l:()=>i});var r=n(900883),a=n(202784),s=n(830691);const o="https://support.atlassian.com/contact/#/",i=({showHostname:e,children:t})=>a.createElement("a",{href:o,target:"_blank"},a.Children.count(t)?t:(e=>e?(0,r.parse)(o).hostname:a.createElement(s._H,{id:"error-boundary.description.support-link",description:"The text of the link which will lead the user to the Atlassian Support web site",defaultMessage:"Atlassian Support"},(e=>e)))(e));i.displayName="AtlassianSupportLink"},235748:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var r=n(202784),a=n(885255);function s({name:e,attributes:t}){const n=(0,r.useContext)(a.F);return(0,r.useEffect)((()=>n.succeed({name:e,attributes:t})),[e,t,n]),null}},145703:(e,t,n)=>{"use strict";n.d(t,{_B:()=>f,Uw:()=>h,Sx:()=>g,iQ:()=>O,e7:()=>C,U7:()=>w,uD:()=>$,SY:()=>T,ag:()=>W});var r=n(454530),a=n(159394),s=n(536631),o=n(557098),i=n(496054),c=n(772005),l=n(397486),u=n(810368),d=n(275392),m=n(391528),p=n(795166);const f="renderer",h="editor",g="confluence.frontend.macro.analytics.tracker",b="taskSuccess",A="taskFail",y="taskAbort",_="taskStart",E=e=>e.split(".").slice(1).join("."),I=(e=new Map)=>{const t=[];for(const n of e.values()){const{name:e}=n;if(e!==o.q.VIEW_ALL_MACRO){const r=(0,a.Z)({uniqueHash:E(e)},k(n));t.push(r)}}return t},O=e=>{var t,n,r;return{type:(null!=(r=e)?r.type:r)||"",macroId:(0,p.or)(null!=(n=e)?n.parameters:n),extensionKey:(0,p.U)(e),extensionType:(null!=(t=e)?t.extensionType:t)||""}},k=e=>{var t,n,r,a,s,o,i;return{extensionKey:(0,p.U)(null!=(i=e)?i.experienceAttributes:i),extensionType:(null!=(o=e)&&null!=(o=o.experienceAttributes)?o.extensionType:o)||"",type:(null!=(s=e)&&null!=(s=s.experienceAttributes)?s.type:s)||"",macroId:(null!=(a=e)&&null!=(a=a.experienceAttributes)?a.macroId:a)||"",duration:(null!=(r=e)?r.duration:r)||"",status:(null!=(n=e)?n.status:n)||"",pageId:(null!=(t=e)?t.pageId:t)||""}},C=(e,t)=>{S(e,t).has(t)||T(e,t).start({attributes:{mode:e},name:o.q.VIEW_ALL_MACRO,timeout:i.O.MACRO_LOAD,id:t})},w=(e,t)=>{const n=S(e,t);if(n.has(t)){if(M(n)){const t={mode:e,macros:null};v(n)&&(t.macros=I(n)),(0,c.OV)().succeed({name:o.q.VIEW_ALL_MACRO,attributes:(0,a.Z)({},t)})}else(0,c.OV)().abort({name:o.q.VIEW_ALL_MACRO,reason:`Some macro aborted before completion in ${i.O.MACRO_LOAD}ms`,attributes:{macros:I(n),mode:e}});L(n).forEach((t=>{const n=(0,p.U)(t.experienceAttributes),r=t.status;(0,d.getAnalyticsWebClient)().then((s=>{s.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:r,attributes:(0,a.Z)((0,a.Z)({},t.experienceAttributes),{},{extensionKey:n,mode:e,task:`${o.q.VIEW_JIRA_MACRO}`})})}))})),n.clear(),R.set(`${e}.${t}`,n)}},M=(e=new Map)=>{if(0===e.size)return!0;for(const t of e.values())if(t.name!==o.q.VIEW_ALL_MACRO&&t.status!==b)return!1;return!0},v=(e=new Map)=>{for(const t of e.values())if(t.name!==o.q.VIEW_ALL_MACRO)return!0;return!1},Z=e=>e.includes(p.o$),L=e=>{const t=[];for(const n of e.values())Z(n.name)&&t.push(n);return t},x=(e,t)=>{!function n(){setTimeout((()=>{const r=S(t,e);if(!r.has(e))return;const s=r.get(e),l=Math.round(window.performance.now()-s.startTime)>i.O.MACRO_LOAD;if(M(r)&&v(r))(0,c.OV)().succeed({name:o.q.VIEW_ALL_MACRO,attributes:{macros:I(r),mode:t}});else if(l){if(v(r)){(0,c.OV)().abort({name:o.q.VIEW_ALL_MACRO,reason:`Some macro aborted before completion in ${i.O.MACRO_LOAD}ms`,attributes:{macros:I(r),mode:t}});(e=>{const t=[];for(const n of e.values())Z(n.name)&&n.status!==b&&t.push(n);return t})(r).forEach((e=>{const n=(0,p.U)(e.experienceAttributes);(0,d.getAnalyticsWebClient)().then((r=>{r.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskAbort",attributes:(0,a.Z)((0,a.Z)({},e.experienceAttributes),{},{extensionKey:n,mode:t,task:`${o.q.VIEW_JIRA_MACRO}`,reason:`JIRA macro aborted before completion in ${i.O.MACRO_LOAD}ms`})})}))}))}else(0,c.OV)().succeed({name:o.q.VIEW_ALL_MACRO,attributes:{mode:t}});r.clear(),R.set(`${t}.${e}`,r)}else n()}),2e3)}()},R=new Map,S=(e,t)=>(R.has(`${e}.${t}`)||R.set(`${e}.${t}`,new Map),R.get(`${e}.${t}`)),$=(e,t,n,r)=>{var s;const c=S(e,t),u=null!=(s=r)?s.macroId:s;if(c.has(u)&&Z(n)){const t=(0,p.U)(r),{status:n}=c.get(u);if(n===b){const{duration:n}=c.get(u);(0,d.getAnalyticsWebClient)().then((s=>{s.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskSuccess",attributes:(0,a.Z)((0,a.Z)({},r),{},{extensionKey:t,mode:e,duration:n,task:`${o.q.VIEW_JIRA_MACRO}`,pageLoadInfo:(0,m.aX)()})})}))}else if(n===y){const{duration:n}=c.get(u);(0,d.getAnalyticsWebClient)().then((s=>{s.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskAbort",attributes:(0,a.Z)((0,a.Z)({},r),{},{extensionKey:t,mode:e,duration:n,task:`${o.q.VIEW_JIRA_MACRO}`,reason:`JIRA macro aborted before completion in ${i.O.MACRO_LOAD}ms`})})}))}else if(n===A){const{duration:n}=c.get(u);(0,d.getAnalyticsWebClient)().then((s=>{s.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskFail",attributes:(0,a.Z)((0,a.Z)({},r),{},{extensionKey:t,mode:e,duration:n,task:`${o.q.VIEW_JIRA_MACRO}`,error:new l.t(`JIRA macro failed to complete in ${i.O.MACRO_LOAD}ms`)})})}))}}},T=(0,s.default)(((e,t)=>{const n=new u.D,s=S(e,t);return n.subscribe((n=>{var l;const{action:u,name:f,attributes:h}=n,g=(0,r.Z)(n,["action","name","attributes"]),E=null!=(l=h)?l.macroId:l;if(u===_){const n=s.get(E);if(n&&n.id===E)return;f===o.q.VIEW_ALL_MACRO?s.has(t)||(s.clear(),(0,c.OV)().start({name:o.q.VIEW_ALL_MACRO,timeout:i.O.MACRO_LOAD,id:t,attributes:{mode:e}}),s.set(t,(0,a.Z)({status:_,name:f,mode:e},g)),R.set(`${e}.${t}`,s)):(s.set(E,(0,a.Z)({status:_,name:f,experienceAttributes:(0,a.Z)((0,a.Z)({},h),{},{extensionKey:(0,p.U)(h)}),pageId:t,mode:e},g)),((e,t,n,r)=>{if(Z(n)){const n=(0,p.U)(r);(0,d.getAnalyticsWebClient)().then((s=>{s.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskStart",attributes:(0,a.Z)((0,a.Z)({},r),{},{extensionKey:n,mode:e,pageId:t,task:`${o.q.VIEW_JIRA_MACRO}`,pageLoadInfo:(0,m.aX)()})})}))}})(e,t,f,h))}else if(u===b){if(!s.has(E))return;const{duration:r,name:o}=n;s.set(E,(0,a.Z)((0,a.Z)({},s.get(E)),{},{id:E,name:o,mode:e,status:b,duration:r,pageId:t})),R.set(`${e}.${t}`,s),$(e,t,o,h)}else if(u===y){if(!s.has(E))return;const{duration:r,reason:i,name:l}=n;s.set(E,(0,a.Z)((0,a.Z)({},s.get(E)),{},{id:E,name:l,mode:e,status:y,duration:r,pageId:t,reason:i})),R.set(`${e}.${t}`,s),(0,c.OV)().abort({name:o.q.VIEW_ALL_MACRO,reason:"Macro abort loading",attributes:{macros:I(s),mode:e}}),$(e,t,l,h)}else if(u==A){if(!s.has(E))return;const{duration:r,error:i,name:l}=n;s.set(E,(0,a.Z)((0,a.Z)({},s.get(E)),{},{id:E,name:l,mode:e,status:A,duration:r,pageId:t,error:i})),R.set(`${e}.${t}`,s),(0,c.OV)().fail({name:o.q.VIEW_ALL_MACRO,error:i,attributes:{macros:I(s),mode:e}}),$(e,t,l,h)}x(t,e)})),n})),W=(e,t)=>{const n=O(t);return`${e}.${(0,p.U)(n)}.${n.macroId}`}},795166:(e,t,n)=>{"use strict";n.d(t,{o$:()=>o,or:()=>i,U:()=>c});var r=n(10425),a=n(726426),s=n.n(a);const o="jira",i=e=>{var t;if(!e)return s()();const n=null!=(t=e)&&null!=(t=t.macroMetadata)&&null!=(t=t.macroId)?t.value:t;return n||(0,r.S)(e)},c=e=>{var t;if(!e)return"";const{extensionKey:n}=e,r=null!=(t=e)&&null!=(t=t.parameters)?t.macroParams:t;return n===o?`${n}${l(r)}`:n},l=e=>{var t,n,r,a;return"true"===(null!=(a=e)&&null!=(a=a.count)?a.value:a)?"-issue-count":(null!=(r=e)?r.columns:r)&&(null!=(n=e)?n.maximumIssues:n)?"-table-view":(null!=(t=e)&&null!=(t=t.key)?t.value:t)?"-single-issue":""}},248404:(e,t,n)=>{"use strict";n.d(t,{HJ:()=>i,W1:()=>c,ps:()=>l});var r=n(159394),a=n(202784),s=n(914957),o=n(391528);const i={channel:"media",actionSubjects:["mediaCardRender","mediaUpload","smartLink"]},c={channel:"editor",actionSubjects:["renderer"]},l=({channelParam:e,children:t})=>{const n=(0,a.useCallback)((t=>{e.actionSubjects.includes(t.payload.actionSubject)&&t.update((e=>(0,r.Z)((0,r.Z)({},e),{},{attributes:(0,r.Z)((0,r.Z)({},e.attributes),{},{pageLoadInfo:(0,o.aX)()})})))}),[e]);return a.createElement(s.Z,{channel:e.channel,onEvent:n},t)};l.displayName="DynamicAnalyticsListener"},382270:(e,t,n)=>{"use strict";n.d(t,{rt:()=>r,ZF:()=>a,kM:()=>s});const r=350,a=8,s=128},636283:(e,t,n)=>{"use strict";n.d(t,{yj:()=>r});const r=(0,n(768606).P)({__loadable_id__:"onFQC",name:"ViewAllInlineComments",loader:async()=>(await Promise.all([n.e(78248),n.e(11216),n.e(85481),n.e(67263),n.e(17050),n.e(28508),n.e(64148),n.e(36653),n.e(39110),n.e(31852),n.e(87978),n.e(36115),n.e(10327),n.e(43841),n.e(83747),n.e(69285),n.e(7836),n.e(58437),n.e(76025),n.e(838)]).then(n.bind(n,778047))).ViewAllInlineCommentsContainer})},49540:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var r=n(286235),a=n(202784),s=n(984116),o=n(908317),i=n(180213),c=n(367450),l=n(302931),u=n(651291),d=n(530358),m=n(230382),p=n.n(m),f=n(604919);const h=p()`query ContentRendererExternalQuery($contentId:ID!$externalToken:String!){sharedContent(contentId:$contentId shareToken:$externalToken){content{id body{atlas_doc_format{value}}type ...contentAppearancePublishedFragment}}}${f.O}`;var g=n(703730),b=n(35658),A=n(151119),y=n(547313),_=n(830691),E=n(491807),I=n(636283),O=n(382270),k=n(187809),C=n(781248),w=n(716847),M=n(169039),v=n(145703),Z=n(210022),L=n(504274),x=n(506706),R=n(410665),S=n(983473),$=n(177299);const T=(0,n(768606).P)({__loadable_id__:"bYkWe",name:"MediaViewer",loader:()=>Promise.all([n.e(78248),n.e(11216),n.e(77003)]).then(n.bind(n,777003))});var W=n(823010),V=n(852343);const F=["wr!com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-loader","wr!com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources","wr!confluence.web.resources:view-content","wr!com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-styles"];var N=n(248404);const q=(0,y.Z)("div",{target:"e2zab620"})({name:"l57rop",styles:"padding-bottom:10px;"}),D=(0,y.Z)("div",{target:"e2zab621"})("display:",(e=>e?"flex":"block"),";"),P=(0,y.Z)("pre",{target:"e2zab622"})({name:"1xyq6zr",styles:"white-space:normal;border:1px solid #dddddd;padding-left:10px;margin-top:0;width:300px;height:48px;overflow-y:scroll;"}),j={margin:"auto",width:"100%"},U={margin:"inherit",width:`calc(100% - ${O.rt}px)`},K=e=>(0,S.EK)(e,"media").map((({attrs:e})=>({align:"center",id:e.id,mediaItemType:e.type,collectionName:e.collection}))),J=(e,t,n)=>()=>{const r=t&&"#"===t[0]&&t.length>1?t.slice(1):null;return a.createElement(a.Fragment,null,a.createElement(x.m,{contentId:e,fallback:!1,fabric:!0}),n&&r?a.createElement(w.Z,{scrollTargetId:r,refOfNodeToWatchForChange:n}):null)},H=(0,E.Z)()((0,_.XN)(class extends a.PureComponent{constructor(...e){super(...e),(0,A.Z)(this,"refOfNodeToWatchForChange",a.createRef())}componentDidMount(){const{contentId:e,featureFlags:t}=this.props;if(this.props.adfError){this.props.createAnalyticsEvent({type:"sendTrackEvent",data:{action:"error",actionSubject:"adf.parsing.error",source:"contentRendererComponent",attributes:{errorMessage:this.props.adfError}}}).fire();!1?this.props.flags.showErrorFlag(this._getStagingErrorText(this.props.adfError)):this.props.flags.showErrorFlag(this._getProductionErrorText())}setTimeout((()=>{V.W.require(F),this.props.contentStateSetReady()}),0);const n=parseInt(String(t["confluence.frontend.fabric.editor.preload.tmeout"]),10);setTimeout((()=>(0,$.Z)()),isFinite(n)?n:1e4),(0,v.e7)(v._B,e)}componentWillUnmount(){const{contentId:e}=this.props;(0,v.U7)(v._B,e)}_getProductionErrorText(){return{title:this.props.intl.formatMessage({id:"adf.translation.error.in.render.title.prod",defaultMessage:"Error displaying content"}),description:a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.intl.formatMessage({id:"adf.translation.error.in.render.description.prod",defaultMessage:'Refresh the page and try again. If the problem persists, contact <a target="_blank" href="{link}">Atlassian Support</a>.'},{link:M.Q})}})}}_getStagingErrorText(e){return{title:this.props.intl.formatMessage({id:"adf.translation.error.in.render.title.staging",defaultMessage:"Error displaying content"}),description:a.createElement(a.Fragment,null,a.createElement(q,{dangerouslySetInnerHTML:{__html:this.props.intl.formatMessage({id:"adf.translation.error.in.render.description.staging",defaultMessage:'An ADF error is preventing your content from being displayed. Discuss further in the <a target="_blank" href="{link}">#cc-content-experience</a> Slack channel.'},{link:"https://atlassian.slack.com/messages/CFGRZK3MF"})}}),a.createElement(_._H,{id:"editor.adf.parsing.error.details"}),a.createElement(P,null,e))}}renderMediaViewer(){const{adf:e,contentId:t}=this.props;return t&&e?a.createElement(T,{parentId:t,media:K(e)}):null}render(){window.performance.mark("CFP-63.view.page.classic.contentrenderer.rendered");const{adf:e,contentId:t,contentType:n,spaceKey:r,appearance:s,scrollTo:o,featureFlags:i}=this.props;if(!t||!e)return null;const c=(0,C.Y)(s);return a.createElement(k.V.Consumer,null,(({isViewAllInlineCommentsVisible:s})=>a.createElement(D,{isViewAllInlineCommentsVisible:s,id:"content",className:"page view",ref:this.refOfNodeToWatchForChange},a.createElement(L.y,{anchorContainer:this.refOfNodeToWatchForChange}),a.createElement(R.j,null,a.createElement(N.ps,{channelParam:N.HJ},a.createElement(W.Z,{priority:Z.U.IMMEDIATE,id:"main-content",allowInlineComments:!0,allowHighlightActions:!0,className:i["confluence.frontend.remove-wiki-content"]?"":"wiki-content",appearance:c,style:s?U:j,adf:e,objectId:t,contentType:n,spaceKey:r,renderWhenReady:J(t,o,this.refOfNodeToWatchForChange)})),s?a.createElement(I.yj,{priority:Z.U.NORMAL}):null),this.renderMediaViewer())))}})),X=a.memo((e=>{var t,n,m,p,f;const{contentId:A,scrollTo:y,data:_,externalToken:E}=e,{featureFlags:I}=(0,c.D)(),O=(0,r.aM)(E?h:g.V,{skip:!!_,context:{single:!0,contentId:A,allowOnExternalPage:!0},variables:{contentId:A,externalToken:E},fetchPolicy:"cache-and-network"});if(O.error)throw O.error;const k=_||O.data,C=_||!E?null!=(f=k)&&null!=(f=f.content)&&null!=(f=f.nodes)?f[0]:f:null!=(p=k)&&null!=(p=p.sharedContent)?p.content:p;if(!C)return null;const w=_?null!=(m=C)&&null!=(m=m.body)&&null!=(m=m.dynamic)?m.value:m:null!=(n=C)&&null!=(n=n.body)&&null!=(n=n.atlas_doc_format)?n.value:n,{adf:M,adfError:v}=(e=>{try{return{adf:JSON.parse(e)}}catch(t){return console.error("Invalid adf document",t),{adfError:(0,d.rs)(t.stack).toString()}}})(w),Z=null!=(t=C)&&null!=(t=t.space)?t.key:t,L=C.type,x=(0,b.uS)(C).appearance;return a.createElement(o.S,{attribution:i.x.CONTENT_EXPERIENCE},a.createElement(s.xs,{to:[l.Q,u.d]},((e,{setReady:t})=>a.createElement(H,{flags:e,adf:M,adfError:v,scrollTo:y,contentId:A,contentType:L,spaceKey:Z,contentStateSetReady:t,appearance:x,featureFlags:I}))))}))},983473:(e,t,n)=>{"use strict";n.d(t,{tr:()=>s,EK:()=>i});var r=n(159394);function a(e){return e.type.name||e.type}function s(e,t){return{type:a(e),attrs:(0,r.Z)((0,r.Z)({},e.attrs),{},{parameters:(0,r.Z)((0,r.Z)({},e.attrs.parameters),t)})}}function o(e,t){for(const n of Object.keys(e)){const r=e[n];t(n,r),null!==r&&"object"==typeof r&&o(e[n],t)}}function i(e,t){const n=[];return o(e,((e,r)=>{r&&r.type===t&&n.push(r)})),n}},852343:(e,t,n)=>{"use strict";n.d(t,{W:()=>a,F:()=>c});var r=n(774443);const a={require:(e,t)=>new Promise((n=>{(0,r.N)(e,(e=>{n(e),t&&t(e)}),(()=>{0}))}))};var s=n(151119),o=n(159394),i=n(202784);const c=function(e,t){const n=(0,o.Z)({isBlocking:!0},t);return t=>{class a extends i.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{dependenciesLoaded:!1}),(0,s.Z)(this,"markAsLoaded",(()=>{this.mounted&&this.setState({dependenciesLoaded:!0})}))}componentDidMount(){this.mounted=!0,e&&e.length>0?(0,r.N)(e,this.markAsLoaded,(()=>{0})):this.markAsLoaded()}componentWillUnmount(){this.mounted=!1}render(){const{dependenciesLoaded:e}=this.state;return e||!n.isBlocking?i.createElement(t,(0,o.Z)((0,o.Z)({},this.props),{},{wrmDependenciesLoaded:e})):null}}return a.displayName="WRMComponent",a.displayName=`WRMComponent(${t.displayName||t.name})`,a}}}}]);
//# sourceMappingURL=97629.3u8pwmQgTy.js.map