(self._cf=self._cf||[]).push([[96156],{596156:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HelpComponent:()=>X});var a=n(159394),o=n(202784),l=n(412470),i=n(352846),s=n(358056),c=n(830691),r=n(51681),u=n(639409),p=n(626491),d=n(768606);const m=(0,d.P)({__loadable_id__:"oNcQS",name:"FeedbackCollector",loader:async()=>(await Promise.all([n.e(78248),n.e(11216),n.e(44711),n.e(75301),n.e(79618),n.e(89745)]).then(n.bind(n,833674))).FeedbackCollector});var h=n(384684),b=n(286235),v=n(817240),g=n(609206),f=n(517600);const _=()=>o.createElement("div",{style:{width:"100%",height:29}});_.displayName="loadingDiv";const y=(0,d.P)({__loadable_id__:"9fPAP",name:"ExitBranchDeploy",loader:async()=>(await n.e(40009).then(n.bind(n,340009))).ExitBranchDeploy,loading:_}),E=(0,d.P)({__loadable_id__:"G/pCC",name:"FeedbackCollectorButton",loader:async()=>(await n.e(76731).then(n.bind(n,176731))).FeedbackCollectorButton,loading:_});var k=n(578540),I=n(846575),C=n(315783),P=n(164464),D=n(134163),w=n(539099),S=n(544289),H=n(557098),O=n(606525),M=n(726942),A=n(930185),F=n(511165),T=n(581316),U=n(230382),x=n.n(U);const B=x()`query NavUserEmailQuery{user(current:true){id emails{value}}}`;var G=n(744052),N=n(347415),R=n(939686);const q=x()`query isAdminQuery{user(current:true){id confluence{operations{operation targetType}}}}`,W=x()`mutation HomeOptStatusMutation($optStatus:String!){updateUserPreferences(userPreferences:{nextGenFeedOptInStatus:$optStatus}){nextGenFeedOptInStatus}}`,Q=(0,c.vU)({helpMenuHelpUsImproveTitle:{id:"nav-menus.help-menu.help-us-improve-section.title",defaultMessage:"Help us improve",description:"Title of Help Us Improve section in help menu."},helpMenuHelpUsImproveGiveFeedbackItem:{id:"nav-menus.help-menu.help-us-improve-section.give-feedback.item",defaultMessage:"Give Feedback",description:"Give Feedback item under Help Us Improve section in help menu."},helpMenuHelpUsImproveRaiseABugItem:{id:"nav-menus.help-menu.help-us-improve-section.raise-a-bug.item",defaultMessage:"Raise a Bug",description:"Raise a bug item under the Help Us Improve section in the help menu."},helpMenuHomeOptIn:{id:"nav-menus.help-menu.homeOptIn",defaultMessage:"Enable home experiment",description:"Button that allows the user early access to an updated version of the home page dashboard"},showQuickstart:{id:"nav-menus.profile.menu.new.navigation.open.quickstart",defaultMessage:"Open Quickstart",description:"label for menu item used to reactivate Quickstart Experience"}});const Z=(0,c.XN)((0,o.memo)((({webItems:e,webSections:t,isAtlassianStaff:n,userId:l,confluencePeopleDirectory:i,isBranchDeploy:s,onOpenDevTools:u,onClickRaiseABug:p,onOpenGlobalFeedbackCollector:d,onOpenFeedbackCollector:m,onOpenShortcutsDialog:h,dialogFn:_,onClose:I,scheduleUpdate:P,intl:{formatMessage:D}})=>{var w;const S=(0,C.ye)("confluence.frontend.enable.help-menu.raise-a-bug"),U=(0,C.TW)("confluence.frontend.in-product.help"),x=(0,A.$A)(),B=(0,O.zG)(),R=(0,C.TW)("confluence.frontend.home-1.5"),{createAnalyticsEvent:Z}=(0,r._)(),{data:j}=(0,b.aM)(q),L=((null!=(w=j)&&null!=(w=w.user)&&null!=(w=w.confluence)?w.operations:w)||[]).some((e=>"administer"===e.operation&&"application"===e.targetType)),{isQuickstartReactivateEnabled:V}=(0,v.G)(),{state:K,toggleDismiss:Y}=(0,g.G)(),{fireDismissToggled:z}=(0,f.lm)(),{renderFeed:J}=(0,F.BW)(),[$]=(0,b.Db)(W),X=(0,o.useCallback)((async()=>{await $({variables:{optStatus:F.VB.OptedIn}}),Z({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"enableHomeExperiment",source:"homeScreen"}}).fire(),window.location.reload()}),[$,Z]),ee=(0,o.useCallback)((()=>{const e=[{content:D(Q.helpMenuHelpUsImproveGiveFeedbackItem),action:d}];S&&L&&e.unshift({content:D(Q.helpMenuHelpUsImproveRaiseABugItem),action:p,href:"https://support.atlassian.com/contact/#/?inquiry_category=technical_issues&dummy_product=confluence&product_key=confluence",target:"_blank"}),R&&!J&&e.push({content:D(Q.helpMenuHomeOptIn),action:X});return{heading:D(Q.helpMenuHelpUsImproveTitle),items:e}}),[d,S,p,L,D,R,J,X]),te=(0,o.useCallback)((()=>{const e=[{content:"Dev tools",action:u}];"hello.atlassian.net"!==window.location.hostname&&"pug.jira-dev.com"!==window.location.hostname&&"localhost"!==window.location.hostname||e.push({content:o.createElement(E,null),action:m}),s&&e.push({content:o.createElement(y,null),action:k.o8});return{heading:"Dev Menu",items:e}}),[s,u,m]),ne=(0,o.useCallback)((()=>{const e=(e="")=>{B.setArticleId(e),x.open(M.rD,M.Jr)};return{heading:"In product help (WIP)",items:[{content:"Open in product help",action:e},{content:"Open in product help With an article",action:()=>e("uknH7ZZHrmzwlTkuDKrrp")}]}}),[B,x]),ae=(0,G.M)(e,t,l,i,{"keyboard-shortcuts-dialog-help-menu":h});if((0,C.ye)("confluence.frontend.enable.help-menu.global-feedback-collector")&&ae.push(ee()),n&&ae.push(te()),U&&ae.push(ne()),V){const{isDismissed:e}=K,t=()=>{z(false),Y(false)};if(e){const e=ae.findIndex((e=>e.heading&&"object"==typeof e.heading&&"navigation.help.name"===e.heading.id));ae[e>=0?e:0].items.unshift({content:o.createElement("div",{"data-test-id":"app-navigation-show-quickstart"},o.createElement(c._H,(0,a.Z)({},Q.showQuickstart))),action:t})}}return o.createElement(N.Z,{testId:"app-navigation-help-menu",menuItems:ae,dialogFn:_,onClose:I,popupKey:T.c6,scheduleUpdate:P,experienceName:H.q.APP_NAV_HELP_DROPDOWN})}))),j=(0,o.memo)((e=>o.createElement(R.X,{experienceName:H.q.APP_NAV_HELP_DROPDOWN},o.createElement(P.e,null,(({featureFlags:t,userId:n})=>o.createElement(h.AE,{query:B},(({data:l})=>{var i;const s=((null!=(i=l)&&null!=(i=i.user)?i.emails:i)||[]).some((e=>e.value&&e.value.endsWith("@atlassian.com")));return o.createElement(S.p,{location:w.Y.SYSTEM_HELP,hasMultipleSections:!0},(({webItems:l,webSections:i})=>o.createElement(Z,(0,a.Z)((0,a.Z)({},e),{},{webItems:l,webSections:i,isAtlassianStaff:s,userId:n,confluencePeopleDirectory:t[T.Cd]}))))}))))))),L=(0,d.P)({__loadable_id__:"TfP8V",name:"KeyboardShortcutsDialog",loader:async()=>(await Promise.all([n.e(78248),n.e(27569)]).then(n.bind(n,627569))).KeyboardShortcutsDialog});var V=n(248839),K=n(364604);const Y=(0,d.P)({__loadable_id__:"PxfqJ",name:"GlobalFeedbackCollector",loader:async()=>(await Promise.all([n.e(11216),n.e(44711),n.e(75301),n.e(79618),n.e(28583),n.e(70466)]).then(n.bind(n,456817))).GlobalFeedbackCollector});var z=n(772005),J=n(704725);const $=l.default.div`
  max-height: calc(100vh - 79px);
  box-sizing: border-box;
`,X=({openDialog:e,isOpen:t,onClose:n,onClick:l})=>{(0,o.useEffect)((()=>{Promise.all([(0,D.M)({location:w.Y.SYSTEM_HELP}),(0,I.WQ)().query({query:B})])}),[]);const{isBranchDeploy:d}=(0,o.useContext)(J.L),{createAnalyticsEvent:h}=(0,r._)(),{match:b}=(0,o.useContext)(u.M),v=(0,o.useCallback)((()=>{(0,z.OV)().abort({name:H.q.APP_NAV_HELP_DROPDOWN,reason:"dropdown closed by user"}),n()}),[n]),g=()=>{h({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"helpMenuHelpUsImproveRaiseABugClicked",source:"helpMenuHelpUsImproveRaiseABug"}}).fire()},f=()=>e((e=>o.createElement(Y,{onClose:e,key:Math.random()}))),_=()=>e((e=>o.createElement(p.I,{onClose:e}))),y=()=>e((e=>o.createElement(m,{onClose:e}))),E=()=>e((e=>o.createElement(L,{onClose:e}))),k=(0,o.useCallback)((()=>{l(),t&&v(),h({type:"sendUIEvent",data:{source:"globalNavigation",action:"clicked",actionSubject:"navigationItem",actionSubjectId:"help",attributes:{selectedItemPageContext:b?b.name:void 0,navigationLayer:"global",navVersion:"3",navdexPointType:V.Om.START_TOUCH}}}).fire()}),[t,v,l,b,h]);return o.createElement(o.Fragment,null,o.createElement(s.Z,{isOpen:t,onClose:v,content:({update:t})=>o.createElement($,null,o.createElement(j,{dialogFn:e,onOpenDevTools:_,onClickRaiseABug:g,onOpenGlobalFeedbackCollector:f,onClose:v,onOpenFeedbackCollector:y,onOpenShortcutsDialog:E,scheduleUpdate:t,isBranchDeploy:d})),trigger:e=>o.createElement("span",{"data-testid":"app-navigation-help"},o.createElement(i.W,(0,a.Z)((0,a.Z)({},e),{},{onClick:k,tooltip:o.createElement(c._H,{id:"app-navigation.help.tooltip",defaultMessage:"Help",description:"Tooltip for the help menu"}),isSelected:t}))),placement:"bottom-end"}),o.createElement(K.P,{accelerator:"?",listener:E}),o.createElement(K.P,{accelerator:"g f",listener:y}))};X.displayName="HelpComponent"},626491:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});const a=(0,n(768606).P)({__loadable_id__:"r4lki",name:"DevToolsDialog",loader:async()=>(await Promise.all([n.e(78248),n.e(11216),n.e(76285),n.e(19233)]).then(n.bind(n,719233))).DevToolsDialog})},726942:(e,t,n)=>{"use strict";n.d(t,{rD:()=>o,Jr:()=>l});var a=n(442298);const o="in-product-help",l=46*(0,a.ww)()}}]);
//# sourceMappingURL=96156.CxgmKPBQ4c.js.map